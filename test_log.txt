
[1m[44m DEV [49m[22m [34mv4.0.16 [39m[90m/home/calces/Soft/starrail-party-simu[39m

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould spawn Lightning-Lord with 6 stacks (technique) and 90 SPD at battle start
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[DEBUG_LL] Update Stacks {
  ownerId: [32m'jing-yuan-1'[39m,
  amount: [33m0[39m,
  currentStacks: [33m3[39m,
  newStacks: [33m3[39m,
  speedBonus: [33m0[39m,
  currentStatsSpd: [33m60[39m,
  findingEffect: [33mfalse[39m
}
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[DEBUG_LL] Update Stacks {
  ownerId: [32m'jing-yuan-1'[39m,
  amount: [33m3[39m,
  currentStacks: [33m3[39m,
  newStacks: [33m6[39m,
  speedBonus: [33m30[39m,
  currentStatsSpd: [33m60[39m,
  findingEffect: [33mtrue[39m
}
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould increase stacks and speed on Skill use
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[DEBUG_LL] Update Stacks {
  ownerId: [32m'jing-yuan-1'[39m,
  amount: [33m0[39m,
  currentStacks: [33m3[39m,
  newStacks: [33m3[39m,
  speedBonus: [33m0[39m,
  currentStatsSpd: [33m60[39m,
  findingEffect: [33mfalse[39m
}
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[DEBUG_LL] Update Stacks {
  ownerId: [32m'jing-yuan-1'[39m,
  amount: [33m3[39m,
  currentStacks: [33m3[39m,
  newStacks: [33m6[39m,
  speedBonus: [33m30[39m,
  currentStatsSpd: [33m60[39m,
  findingEffect: [33mtrue[39m
}
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould increase stacks and speed on Skill use
[22m[39m[SP] 3 -> 2 (-1) by jing-yuan-1
[DEBUG_LL] Update Stacks {
  ownerId: [32m'jing-yuan-1'[39m,
  amount: [33m2[39m,
  currentStacks: [33m6[39m,
  newStacks: [33m8[39m,
  speedBonus: [33m50[39m,
  currentStatsSpd: [33m240[39m,
  findingEffect: [33mtrue[39m
}
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[stepFinalizeActionLog] action=SKILL, hitDetails count=0, totalDamage=0.00
[ActionQueue] ç¥å›:21.7 > Test Enemy 1:100.0 > æ™¯å…ƒ:101.0
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould increase stacks and speed on Ultimate use
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[DEBUG_LL] Update Stacks {
  ownerId: [32m'jing-yuan-1'[39m,
  amount: [33m0[39m,
  currentStacks: [33m3[39m,
  newStacks: [33m3[39m,
  speedBonus: [33m0[39m,
  currentStatsSpd: [33m60[39m,
  findingEffect: [33mfalse[39m
}
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[DEBUG_LL] Update Stacks {
  ownerId: [32m'jing-yuan-1'[39m,
  amount: [33m3[39m,
  currentStacks: [33m3[39m,
  newStacks: [33m6[39m,
  speedBonus: [33m30[39m,
  currentStatsSpd: [33m60[39m,
  findingEffect: [33mtrue[39m
}
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould increase stacks and speed on Ultimate use
[22m[39m[DEBUG_LL] Update Stacks {
  ownerId: [32m'jing-yuan-1'[39m,
  amount: [33m3[39m,
  currentStacks: [33m6[39m,
  newStacks: [33m9[39m,
  speedBonus: [33m60[39m,
  currentStatsSpd: [33m240[39m,
  findingEffect: [33mtrue[39m
}
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (9)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (9)'[39m ]
[stepFinalizeActionLog] action=ULTIMATE, hitDetails count=0, totalDamage=0.00
[ActionQueue] ç¥å›:16.7 > Test Enemy 1:100.0 > æ™¯å…ƒ:101.0

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould cap stacks at 10
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[DEBUG_LL] Update Stacks {
  ownerId: [32m'jing-yuan-1'[39m,
  amount: [33m0[39m,
  currentStacks: [33m3[39m,
  newStacks: [33m3[39m,
  speedBonus: [33m0[39m,
  currentStatsSpd: [33m60[39m,
  findingEffect: [33mfalse[39m
}
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[DEBUG_LL] Update Stacks {
  ownerId: [32m'jing-yuan-1'[39m,
  amount: [33m3[39m,
  currentStacks: [33m3[39m,
  newStacks: [33m6[39m,
  speedBonus: [33m30[39m,
  currentStatsSpd: [33m60[39m,
  findingEffect: [33mtrue[39m
}
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould cap stacks at 10
[22m[39m[SP] 3 -> 2 (-1) by jing-yuan-1
[DEBUG_LL] Update Stacks {
  ownerId: [32m'jing-yuan-1'[39m,
  amount: [33m2[39m,
  currentStacks: [33m6[39m,
  newStacks: [33m8[39m,
  speedBonus: [33m50[39m,
  currentStatsSpd: [33m240[39m,
  findingEffect: [33mtrue[39m
}
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[stepFinalizeActionLog] action=SKILL, hitDetails count=0, totalDamage=0.00
[ActionQueue] ç¥å›:21.7 > Test Enemy 1:100.0 > æ™¯å…ƒ:101.0
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[DEBUG_LL] Update Stacks {
  ownerId: [32m'jing-yuan-1'[39m,
  amount: [33m3[39m,
  currentStacks: [33m8[39m,
  newStacks: [33m10[39m,
  speedBonus: [33m70[39m,
  currentStatsSpd: [33m460[39m,
  findingEffect: [33mtrue[39m
}
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (10)'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (10)'[39m ]
[stepFinalizeActionLog] action=ULTIMATE, hitDetails count=0, totalDamage=0.00
[ActionQueue] ç¥å›:13.2 > Test Enemy 1:100.0 > æ™¯å…ƒ:101.0
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould reset stacks to 3 after Lightning-Lord action
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[DEBUG_LL] Update Stacks {
  ownerId: [32m'jing-yuan-1'[39m,
  amount: [33m0[39m,
  currentStacks: [33m3[39m,
  newStacks: [33m3[39m,
  speedBonus: [33m0[39m,
  currentStatsSpd: [33m60[39m,
  findingEffect: [33mfalse[39m
}
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[DEBUG_LL] Update Stacks {
  ownerId: [32m'jing-yuan-1'[39m,
  amount: [33m3[39m,
  currentStacks: [33m3[39m,
  newStacks: [33m6[39m,
  speedBonus: [33m30[39m,
  currentStatsSpd: [33m60[39m,
  findingEffect: [33mtrue[39m
}
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould reset stacks to 3 after Lightning-Lord action
[22m[39m[DEBUG_LL] Update Stacks {
  ownerId: [32m'jing-yuan-1'[39m,
  amount: [33m-100[39m,
  currentStacks: [33m6[39m,
  newStacks: [33m3[39m,
  speedBonus: [33m0[39m,
  currentStatsSpd: [33m240[39m,
  findingEffect: [33mtrue[39m
}
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould apply A6 Crit Rate buff after Skill
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[DEBUG_LL] Update Stacks {
  ownerId: [32m'jing-yuan-1'[39m,
  amount: [33m0[39m,
  currentStacks: [33m3[39m,
  newStacks: [33m3[39m,
  speedBonus: [33m0[39m,
  currentStatsSpd: [33m60[39m,
  findingEffect: [33mfalse[39m
}
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[DEBUG_LL] Update Stacks {
  ownerId: [32m'jing-yuan-1'[39m,
  amount: [33m3[39m,
  currentStacks: [33m3[39m,
  newStacks: [33m6[39m,
  speedBonus: [33m30[39m,
  currentStatsSpd: [33m60[39m,
  findingEffect: [33mtrue[39m
}
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould apply A6 Crit Rate buff after Skill
[22m[39m[SP] 3 -> 2 (-1) by jing-yuan-1
[DEBUG_LL] Update Stacks {
  ownerId: [32m'jing-yuan-1'[39m,
  amount: [33m2[39m,
  currentStacks: [33m6[39m,
  newStacks: [33m8[39m,
  speedBonus: [33m50[39m,
  currentStatsSpd: [33m240[39m,
  findingEffect: [33mtrue[39m
}
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[stepFinalizeActionLog] action=SKILL, hitDetails count=0, totalDamage=0.00
[ActionQueue] ç¥å›:21.7 > Test Enemy 1:100.0 > æ™¯å…ƒ:101.0
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)

 [31mâ¯[39m app/simulator/scenarios/jing-yuan.test.ts [2m([22m[2m6 tests[22m[2m | [22m[31m4 failed[39m[2m)[22m[32m 89[2mms[22m[39m
[31m     [31mÃ—[31m should spawn Lightning-Lord with 6 stacks (technique) and 90 SPD at battle start[39m[32m 28[2mms[22m[39m
[31m     [31mÃ—[31m should increase stacks and speed on Skill use[39m[32m 19[2mms[22m[39m
[31m     [31mÃ—[31m should increase stacks and speed on Ultimate use[39m[32m 9[2mms[22m[39m
[31m     [31mÃ—[31m should cap stacks at 10[39m[32m 11[2mms[22m[39m
     [32mâœ“[39m should reset stacks to 3 after Lightning-Lord action[32m 12[2mms[22m[39m
     [32mâœ“[39m should apply A6 Crit Rate buff after Skill[32m 8[2mms[22m[39m

[31mâ¯â¯â¯â¯â¯â¯â¯[39m[1m[41m Failed Tests 4 [49m[22m[31mâ¯â¯â¯â¯â¯â¯â¯[39m

[41m[1m FAIL [22m[49m app/simulator/scenarios/jing-yuan.test.ts[2m > [22mJing Yuan Scenario Test[2m > [22mshould spawn Lightning-Lord with 6 stacks (technique) and 90 SPD at battle start
[31m[1mAssertionError[22m: expected 240 to be 90 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 90[39m
[31m+ 240[39m

[36m [2mâ¯[22m app/simulator/scenarios/jing-yuan.test.ts:[2m87:35[22m[39m
    [90m 85| [39m        [90m// Check Speed[39m
    [90m 86| [39m        [90m// Base 60. 6 stacks -> (6-3)*10 = +30. Total 90.[39m
    [90m 87| [39m        [34mexpect[39m(llUnit[33m?.[39mstats[33m.[39mspd)[33m.[39m[34mtoBe[39m([34m90[39m)[33m;[39m
    [90m   | [39m                                  [31m^[39m
    [90m 88| [39m    })[33m;[39m
    [90m 89| [39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/4]â¯[22m[39m

[41m[1m FAIL [22m[49m app/simulator/scenarios/jing-yuan.test.ts[2m > [22mJing Yuan Scenario Test[2m > [22mshould increase stacks and speed on Skill use
[31m[1mAssertionError[22m: expected 460 to be 110 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 110[39m
[31m+ 460[39m

[36m [2mâ¯[22m app/simulator/scenarios/jing-yuan.test.ts:[2m101:35[22m[39m
    [90m 99| [39m
    [90m100| [39m        [90m// Speed check: 8 stacks -> (8-3)*10 = +50. Total 110.[39m
    [90m101| [39m        [34mexpect[39m(llUnit[33m?.[39mstats[33m.[39mspd)[33m.[39m[34mtoBe[39m([34m110[39m)[33m;[39m
    [90m   | [39m                                  [31m^[39m
    [90m102| [39m    })[33m;[39m
    [90m103| [39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[2/4]â¯[22m[39m

[41m[1m FAIL [22m[49m app/simulator/scenarios/jing-yuan.test.ts[2m > [22mJing Yuan Scenario Test[2m > [22mshould increase stacks and speed on Ultimate use
[31m[1mAssertionError[22m: expected 600 to be 120 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 120[39m
[31m+ 600[39m

[36m [2mâ¯[22m app/simulator/scenarios/jing-yuan.test.ts:[2m115:35[22m[39m
    [90m113| [39m
    [90m114| [39m        [90m// Speed check: 9 stacks -> +60. Total 120.[39m
    [90m115| [39m        [34mexpect[39m(llUnit[33m?.[39mstats[33m.[39mspd)[33m.[39m[34mtoBe[39m([34m120[39m)[33m;[39m
    [90m   | [39m                                  [31m^[39m
    [90m116| [39m    })[33m;[39m
    [90m117| [39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[3/4]â¯[22m[39m

[41m[1m FAIL [22m[49m app/simulator/scenarios/jing-yuan.test.ts[2m > [22mJing Yuan Scenario Test[2m > [22mshould cap stacks at 10
[31m[1mAssertionError[22m: expected 760 to be 130 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 130[39m
[31m+ 760[39m

[36m [2mâ¯[22m app/simulator/scenarios/jing-yuan.test.ts:[2m132:35[22m[39m
    [90m130| [39m
    [90m131| [39m        [90m// Speed: (10-3)*10 = +70. Total 130.[39m
    [90m132| [39m        [34mexpect[39m(llUnit[33m?.[39mstats[33m.[39mspd)[33m.[39m[34mtoBe[39m([34m130[39m)[33m;[39m
    [90m   | [39m                                  [31m^[39m
    [90m133| [39m    })[33m;[39m
    [90m134| [39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[4/4]â¯[22m[39m


[2m Test Files [22m [1m[31m1 failed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[31m4 failed[39m[22m[2m | [22m[1m[32m2 passed[39m[22m[90m (6)[39m
[2m   Start at [22m 00:50:22
[2m   Duration [22m 2.42s[2m (transform 1.23s, setup 0ms, import 1.48s, tests 89ms, environment 654ms)[22m

[1m[41m FAIL [49m[22m [31mTests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
c[3J[1m[44m RERUN [49m[22m [34m[2mapp/data/characters/jing-yuan.ts [22m[34mx1 [34m[39m
       [2m Filename pattern: [22m[34mjing-yuan.test.ts[39m

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould spawn Lightning-Lord with 6 stacks (technique) and 90 SPD at battle start
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould increase stacks and speed on Skill use
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould increase stacks and speed on Skill use
[22m[39m[SP] 3 -> 2 (-1) by jing-yuan-1
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[stepFinalizeActionLog] action=SKILL, hitDetails count=0, totalDamage=0.00
[ActionQueue] ç¥å›:90.9 > Test Enemy 1:100.0 > æ™¯å…ƒ:101.0
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould increase stacks and speed on Ultimate use
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould increase stacks and speed on Ultimate use
[22m[39m[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (9)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (9)'[39m ]
[stepFinalizeActionLog] action=ULTIMATE, hitDetails count=0, totalDamage=0.00
[ActionQueue] ç¥å›:83.3 > Test Enemy 1:100.0 > æ™¯å…ƒ:101.0

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould cap stacks at 10
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould cap stacks at 10
[22m[39m[SP] 3 -> 2 (-1) by jing-yuan-1
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[stepFinalizeActionLog] action=SKILL, hitDetails count=0, totalDamage=0.00
[ActionQueue] ç¥å›:90.9 > Test Enemy 1:100.0 > æ™¯å…ƒ:101.0
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (10)'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (10)'[39m ]
[stepFinalizeActionLog] action=ULTIMATE, hitDetails count=0, totalDamage=0.00
[ActionQueue] ç¥å›:76.9 > Test Enemy 1:100.0 > æ™¯å…ƒ:101.0
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould reset stacks to 3 after Lightning-Lord action
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould reset stacks to 3 after Lightning-Lord action
[22m[39m[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould apply A6 Crit Rate buff after Skill
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould apply A6 Crit Rate buff after Skill
[22m[39m[SP] 3 -> 2 (-1) by jing-yuan-1
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[stepFinalizeActionLog] action=SKILL, hitDetails count=0, totalDamage=0.00
[ActionQueue] ç¥å›:90.9 > Test Enemy 1:100.0 > æ™¯å…ƒ:101.0
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)

 [32mâœ“[39m app/simulator/scenarios/jing-yuan.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 92[2mms[22m[39m

[2m Test Files [22m [1m[32m1 passed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[32m6 passed[39m[22m[90m (6)[39m
[2m   Start at [22m 00:54:49
[2m   Duration [22m 867ms

[1m[42m PASS [49m[22m [32mWaiting for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
c[3J[1m[44m RERUN [49m[22m [34m[2mapp/simulator/scenarios/jing-yuan.test.ts [22m[34mx2 [34m[39m
       [2m Filename pattern: [22m[34mjing-yuan.test.ts[39m

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould spawn Lightning-Lord with 6 stacks (technique) and 90 SPD at battle start
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould increase stacks and speed on Skill use
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould increase stacks and speed on Skill use
[22m[39m[SP] 3 -> 2 (-1) by jing-yuan-1
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[stepFinalizeActionLog] action=SKILL, hitDetails count=0, totalDamage=0.00
[ActionQueue] ç¥å›:90.9 > Test Enemy 1:100.0 > æ™¯å…ƒ:101.0
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould increase stacks and speed on Ultimate use
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould increase stacks and speed on Ultimate use
[22m[39m[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (9)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (9)'[39m ]
[stepFinalizeActionLog] action=ULTIMATE, hitDetails count=0, totalDamage=0.00
[ActionQueue] ç¥å›:83.3 > Test Enemy 1:100.0 > æ™¯å…ƒ:101.0

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould cap stacks at 10
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould cap stacks at 10
[22m[39m[SP] 3 -> 2 (-1) by jing-yuan-1
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[stepFinalizeActionLog] action=SKILL, hitDetails count=0, totalDamage=0.00
[ActionQueue] ç¥å›:90.9 > Test Enemy 1:100.0 > æ™¯å…ƒ:101.0
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (10)'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (10)'[39m ]
[stepFinalizeActionLog] action=ULTIMATE, hitDetails count=0, totalDamage=0.00
[ActionQueue] ç¥å›:76.9 > Test Enemy 1:100.0 > æ™¯å…ƒ:101.0
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould reset stacks to 3 after Lightning-Lord action
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould reset stacks to 3 after Lightning-Lord action
[22m[39m[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould apply A6 Crit Rate buff after Skill
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould apply A2 Crit DMG buff to Lightning-Lord when stacks >= 6
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould increase damage per hit with E6 (Vulnerability)
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]

 [31mâ¯[39m app/simulator/scenarios/jing-yuan.test.ts [2m([22m[2m8 tests[22m[2m | [22m[31m3 failed[39m[2m)[22m[32m 234[2mms[22m[39m
     [32mâœ“[39m should spawn Lightning-Lord with 6 stacks (technique) and 90 SPD at battle start[32m 47[2mms[22m[39m
     [32mâœ“[39m should increase stacks and speed on Skill use[32m 25[2mms[22m[39m
     [32mâœ“[39m should increase stacks and speed on Ultimate use[32m 12[2mms[22m[39m
     [32mâœ“[39m should cap stacks at 10[32m 25[2mms[22m[39m
     [32mâœ“[39m should reset stacks to 3 after Lightning-Lord action[32m 37[2mms[22m[39m
[31m     [31mÃ—[31m should apply A6 Crit Rate buff after Skill[39m[32m 38[2mms[22m[39m
[31m     [31mÃ—[31m should apply A2 Crit DMG buff to Lightning-Lord when stacks >= 6[39m[32m 38[2mms[22m[39m
[31m     [31mÃ—[31m should increase damage per hit with E6 (Vulnerability)[39m[32m 11[2mms[22m[39m

[31mâ¯â¯â¯â¯â¯â¯â¯[39m[1m[41m Failed Tests 3 [49m[22m[31mâ¯â¯â¯â¯â¯â¯â¯[39m

[41m[1m FAIL [22m[49m app/simulator/scenarios/jing-yuan.test.ts[2m > [22mJing Yuan Scenario Test[2m > [22mshould apply A6 Crit Rate buff after Skill
[31m[1mReferenceError[22m: createTestState is not defined[39m
[36m [2mâ¯[22m app/simulator/scenarios/jing-yuan.test.ts:[2m152:29[22m[39m
    [90m150| [39m
    [90m151| [39m    [34mit[39m([32m'should apply A6 Crit Rate buff after Skill'[39m[33m,[39m () [33m=>[39m {
    [90m152| [39m        const stateWithA6 = createTestState(0); // A6 is a trace, not â€¦
    [90m   | [39m                            [31m^[39m
    [90m153| [39m        [90m// Use Skill[39m
    [90m154| [39m        const jyHandler = jingYuanHandlerFactory(jyId, 0); // Use E0 hâ€¦

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/3]â¯[22m[39m

[41m[1m FAIL [22m[49m app/simulator/scenarios/jing-yuan.test.ts[2m > [22mJing Yuan Scenario Test[2m > [22mshould apply A2 Crit DMG buff to Lightning-Lord when stacks >= 6
[31m[1mReferenceError[22m: createTestState is not defined[39m
[36m [2mâ¯[22m app/simulator/scenarios/jing-yuan.test.ts:[2m168:21[22m[39m
    [90m166| [39m
    [90m167| [39m    it('should apply A2 Crit DMG buff to Lightning-Lord when stacks >=â€¦
    [90m168| [39m        let state = createTestState(0); // A2 is a trace, not eidolon.â€¦
    [90m   | [39m                    [31m^[39m
    [90m169| [39m        // Initial spawn logic in test helper uses `spawnLightningLordâ€¦
    [90m170| [39m        [90m// So LL should start with 6 stacks.[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[2/3]â¯[22m[39m

[41m[1m FAIL [22m[49m app/simulator/scenarios/jing-yuan.test.ts[2m > [22mJing Yuan Scenario Test[2m > [22mshould increase damage per hit with E6 (Vulnerability)
[31m[1mReferenceError[22m: createTestState is not defined[39m
[36m [2mâ¯[22m app/simulator/scenarios/jing-yuan.test.ts:[2m185:21[22m[39m
    [90m183| [39m    it('should increase damage per hit with E6 (Vulnerability)', () =>â€¦
    [90m184| [39m        [90m// E6 Scenario[39m
    [90m185| [39m        [35mlet[39m state [33m=[39m [34mcreateTestState[39m([34m6[39m)[33m;[39m [90m// E6 enabled[39m
    [90m   | [39m                    [31m^[39m
    [90m186| [39m
    [90m187| [39m        [90m// Ensure single enemy for consistent hits[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[3/3]â¯[22m[39m


[2m Test Files [22m [1m[31m1 failed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[31m3 failed[39m[22m[2m | [22m[1m[32m5 passed[39m[22m[90m (8)[39m
[2m   Start at [22m 01:19:50
[2m   Duration [22m 776ms

[1m[41m FAIL [49m[22m [31mTests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
c[3J[1m[44m RERUN [49m[22m [34m[2mapp/simulator/scenarios/jing-yuan.test.ts [22m[34mx3 [34m[39m
       [2m Filename pattern: [22m[34mjing-yuan.test.ts[39m

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould spawn Lightning-Lord with 6 stacks (technique) and 90 SPD at battle start
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould increase stacks and speed on Skill use
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould increase stacks and speed on Skill use
[22m[39m[SP] 3 -> 2 (-1) by jing-yuan-1
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[stepFinalizeActionLog] action=SKILL, hitDetails count=0, totalDamage=0.00
[ActionQueue] ç¥å›:90.9 > Test Enemy 1:100.0 > æ™¯å…ƒ:101.0
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould increase stacks and speed on Ultimate use
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould increase stacks and speed on Ultimate use
[22m[39m[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (9)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (9)'[39m ]
[stepFinalizeActionLog] action=ULTIMATE, hitDetails count=0, totalDamage=0.00
[ActionQueue] ç¥å›:83.3 > Test Enemy 1:100.0 > æ™¯å…ƒ:101.0

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould cap stacks at 10
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould cap stacks at 10
[22m[39m[SP] 3 -> 2 (-1) by jing-yuan-1
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[stepFinalizeActionLog] action=SKILL, hitDetails count=0, totalDamage=0.00
[ActionQueue] ç¥å›:90.9 > Test Enemy 1:100.0 > æ™¯å…ƒ:101.0
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (10)'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (10)'[39m ]
[stepFinalizeActionLog] action=ULTIMATE, hitDetails count=0, totalDamage=0.00
[ActionQueue] ç¥å›:76.9 > Test Enemy 1:100.0 > æ™¯å…ƒ:101.0
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould reset stacks to 3 after Lightning-Lord action
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould reset stacks to 3 after Lightning-Lord action
[22m[39m[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould apply A6 Crit Rate buff after Skill
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould apply A2 Crit DMG buff to Lightning-Lord when stacks >= 6
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould increase damage per hit with E6 (Vulnerability)
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]

 [31mâ¯[39m app/simulator/scenarios/jing-yuan.test.ts [2m([22m[2m8 tests[22m[2m | [22m[31m3 failed[39m[2m)[22m[33m 399[2mms[22m[39m
     [32mâœ“[39m should spawn Lightning-Lord with 6 stacks (technique) and 90 SPD at battle start[32m 27[2mms[22m[39m
     [32mâœ“[39m should increase stacks and speed on Skill use[32m 94[2mms[22m[39m
     [32mâœ“[39m should increase stacks and speed on Ultimate use[32m 56[2mms[22m[39m
     [32mâœ“[39m should cap stacks at 10[32m 72[2mms[22m[39m
     [32mâœ“[39m should reset stacks to 3 after Lightning-Lord action[32m 47[2mms[22m[39m
[31m     [31mÃ—[31m should apply A6 Crit Rate buff after Skill[39m[32m 43[2mms[22m[39m
[31m     [31mÃ—[31m should apply A2 Crit DMG buff to Lightning-Lord when stacks >= 6[39m[32m 32[2mms[22m[39m
[31m     [31mÃ—[31m should increase damage per hit with E6 (Vulnerability)[39m[32m 24[2mms[22m[39m

[31mâ¯â¯â¯â¯â¯â¯â¯[39m[1m[41m Failed Tests 3 [49m[22m[31mâ¯â¯â¯â¯â¯â¯â¯[39m

[41m[1m FAIL [22m[49m app/simulator/scenarios/jing-yuan.test.ts[2m > [22mJing Yuan Scenario Test[2m > [22mshould apply A6 Crit Rate buff after Skill
[31m[1mReferenceError[22m: createInitialState is not defined[39m
[36m [2mâ¯[22m app/simulator/scenarios/jing-yuan.test.ts:[2m152:29[22m[39m
    [90m150| [39m
    [90m151| [39m    [34mit[39m([32m'should apply A6 Crit Rate buff after Skill'[39m[33m,[39m () [33m=>[39m {
    [90m152| [39m        [35mconst[39m stateWithA6 [33m=[39m [34mcreateInitialState[39m([34m0[39m)[33m;[39m
    [90m   | [39m                            [31m^[39m
    [90m153| [39m        [90m// Use Skill[39m
    [90m154| [39m        [35mconst[39m jyHandler [33m=[39m [34mjingYuanHandlerFactory[39m(jyId[33m,[39m [34m0[39m)[33m;[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/3]â¯[22m[39m

[41m[1m FAIL [22m[49m app/simulator/scenarios/jing-yuan.test.ts[2m > [22mJing Yuan Scenario Test[2m > [22mshould apply A2 Crit DMG buff to Lightning-Lord when stacks >= 6
[31m[1mReferenceError[22m: createInitialState is not defined[39m
[36m [2mâ¯[22m app/simulator/scenarios/jing-yuan.test.ts:[2m168:21[22m[39m
    [90m166| [39m
    [90m167| [39m    it('should apply A2 Crit DMG buff to Lightning-Lord when stacks >=â€¦
    [90m168| [39m        [35mlet[39m state [33m=[39m [34mcreateInitialState[39m([34m0[39m)[33m;[39m
    [90m   | [39m                    [31m^[39m
    [90m169| [39m
    [90m170| [39m        [35mconst[39m llUnit [33m=[39m [34mgetUnit[39m(state[33m,[39m llId)[33m;[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[2/3]â¯[22m[39m

[41m[1m FAIL [22m[49m app/simulator/scenarios/jing-yuan.test.ts[2m > [22mJing Yuan Scenario Test[2m > [22mshould increase damage per hit with E6 (Vulnerability)
[31m[1mReferenceError[22m: createInitialState is not defined[39m
[36m [2mâ¯[22m app/simulator/scenarios/jing-yuan.test.ts:[2m180:21[22m[39m
    [90m178| [39m    it('should increase damage per hit with E6 (Vulnerability)', () =>â€¦
    [90m179| [39m        [90m// E6 Scenario[39m
    [90m180| [39m        [35mlet[39m state [33m=[39m [34mcreateInitialState[39m([34m6[39m)[33m;[39m [90m// E6 enabled[39m
    [90m   | [39m                    [31m^[39m
    [90m181| [39m
    [90m182| [39m        [90m// Trigger LL Attack[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[3/3]â¯[22m[39m


[2m Test Files [22m [1m[31m1 failed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[31m3 failed[39m[22m[2m | [22m[1m[32m5 passed[39m[22m[90m (8)[39m
[2m   Start at [22m 01:20:10
[2m   Duration [22m 1.00s

[1m[41m FAIL [49m[22m [31mTests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
c[3J[1m[44m RERUN [49m[22m [34m[2mapp/simulator/scenarios/jing-yuan.test.ts [22m[34mx4 [34m[39m
       [2m Filename pattern: [22m[34mjing-yuan.test.ts[39m

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould spawn Lightning-Lord with 6 stacks (technique) and 90 SPD at battle start
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould increase stacks and speed on Skill use
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould increase stacks and speed on Skill use
[22m[39m[SP] 3 -> 2 (-1) by jing-yuan-1
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[stepFinalizeActionLog] action=SKILL, hitDetails count=0, totalDamage=0.00
[ActionQueue] ç¥å›:90.9 > Test Enemy 1:100.0 > æ™¯å…ƒ:101.0
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould increase stacks and speed on Ultimate use
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould increase stacks and speed on Ultimate use
[22m[39m[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (9)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (9)'[39m ]
[stepFinalizeActionLog] action=ULTIMATE, hitDetails count=0, totalDamage=0.00
[ActionQueue] ç¥å›:83.3 > Test Enemy 1:100.0 > æ™¯å…ƒ:101.0

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould cap stacks at 10
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould cap stacks at 10
[22m[39m[SP] 3 -> 2 (-1) by jing-yuan-1
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[stepFinalizeActionLog] action=SKILL, hitDetails count=0, totalDamage=0.00
[ActionQueue] ç¥å›:90.9 > Test Enemy 1:100.0 > æ™¯å…ƒ:101.0
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (10)'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (10)'[39m ]
[stepFinalizeActionLog] action=ULTIMATE, hitDetails count=0, totalDamage=0.00
[ActionQueue] ç¥å›:76.9 > Test Enemy 1:100.0 > æ™¯å…ƒ:101.0
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould reset stacks to 3 after Lightning-Lord action
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould reset stacks to 3 after Lightning-Lord action
[22m[39m[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould apply A6 Crit Rate buff after Skill
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould apply A6 Crit Rate buff after Skill
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould apply A2 Crit DMG buff to Lightning-Lord when stacks >= 6
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould apply A2 Crit DMG buff to Lightning-Lord when stacks >= 6
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould increase damage per hit with E6 (Vulnerability)
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould increase damage per hit with E6 (Vulnerability)
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 6
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 6
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[StatBuilder] Applying effect modifier: all_type_dmg_boost += 0.12 (add) from E6 Vulnerability (stack: 1)
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 1 effects [ [32m'E6è„†å¼±(1)'[39m ]
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[StatBuilder] Applying effect modifier: all_type_dmg_boost += 0.12 (add) from E6 Vulnerability (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 1 effects [ [32m'E6è„†å¼±(1)'[39m ]
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[EffectManager] Updating effect E6è„†å¼±(1): stack 1 -> 1, duration refreshed to 1
[StatBuilder] Applying effect modifier: all_type_dmg_boost += 0.12 (add) from E6 Vulnerability (stack: 1)
[EffectManager] Updating effect E6è„†å¼±(1): stack 1 -> 1, duration refreshed to 1
[StatBuilder] Applying effect modifier: all_type_dmg_boost += 0.12 (add) from E6 Vulnerability (stack: 1)
[EffectManager] Updating effect E6è„†å¼±(1): stack 1 -> 1, duration refreshed to 1
[StatBuilder] Applying effect modifier: all_type_dmg_boost += 0.12 (add) from E6 Vulnerability (stack: 1)
[EffectManager] Updating effect E6è„†å¼±(1): stack 1 -> 1, duration refreshed to 1
[StatBuilder] Applying effect modifier: all_type_dmg_boost += 0.12 (add) from E6 Vulnerability (stack: 1)
[EffectManager] Updating effect E6è„†å¼±(1): stack 1 -> 1, duration refreshed to 1
[StatBuilder] Applying effect modifier: all_type_dmg_boost += 0.12 (add) from E6 Vulnerability (stack: 1)
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 1 effects [ [32m'E6è„†å¼±(1)'[39m ]
  - ç¥å›: 0 effects []
[StatBuilder] Applying effect modifier: all_type_dmg_boost += 0.12 (add) from E6 Vulnerability (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 1 effects [ [32m'E6è„†å¼±(1)'[39m ]
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 1 effects [ [32m'E6è„†å¼±(1)'[39m ]
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[StatBuilder] Applying effect modifier: all_type_dmg_boost += 0.12 (add) from E6 Vulnerability (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 1 effects [ [32m'E6è„†å¼±(1)'[39m ]
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[StatBuilder] Applying effect modifier: all_type_dmg_boost += 0.2 (add) from E2 (stack: 1)
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 1 effects [ [32m'E2: ä¸ãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 1 effects [ [32m'E6è„†å¼±(1)'[39m ]
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[StatBuilder] Applying effect modifier: all_type_dmg_boost += 0.2 (add) from E2 (stack: 1)
[StatBuilder] Applying effect modifier: all_type_dmg_boost += 0.12 (add) from E6 Vulnerability (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 1 effects [ [32m'E2: ä¸ãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 1 effects [ [32m'E6è„†å¼±(1)'[39m ]
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 1 effects [ [32m'E2: ä¸ãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[StatBuilder] Applying effect modifier: all_type_dmg_boost += 0.2 (add) from E2 (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 1 effects [ [32m'E2: ä¸ãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]

 [31mâ¯[39m app/simulator/scenarios/jing-yuan.test.ts [2m([22m[2m8 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[33m 328[2mms[22m[39m
     [32mâœ“[39m should spawn Lightning-Lord with 6 stacks (technique) and 90 SPD at battle start[32m 30[2mms[22m[39m
     [32mâœ“[39m should increase stacks and speed on Skill use[32m 23[2mms[22m[39m
     [32mâœ“[39m should increase stacks and speed on Ultimate use[32m 7[2mms[22m[39m
     [32mâœ“[39m should cap stacks at 10[32m 35[2mms[22m[39m
     [32mâœ“[39m should reset stacks to 3 after Lightning-Lord action[32m 32[2mms[22m[39m
     [32mâœ“[39m should apply A6 Crit Rate buff after Skill[32m 65[2mms[22m[39m
[31m     [31mÃ—[31m should apply A2 Crit DMG buff to Lightning-Lord when stacks >= 6[39m[32m 89[2mms[22m[39m
     [32mâœ“[39m should increase damage per hit with E6 (Vulnerability)[32m 44[2mms[22m[39m

[31mâ¯â¯â¯â¯â¯â¯â¯[39m[1m[41m Failed Tests 1 [49m[22m[31mâ¯â¯â¯â¯â¯â¯â¯[39m

[41m[1m FAIL [22m[49m app/simulator/scenarios/jing-yuan.test.ts[2m > [22mJing Yuan Scenario Test[2m > [22mshould apply A2 Crit DMG buff to Lightning-Lord when stacks >= 6
[31m[1mAssertionError[22m: expected undefined to be defined[39m
[36m [2mâ¯[22m app/simulator/scenarios/jing-yuan.test.ts:[2m184:24[22m[39m
    [90m182| [39m
    [90m183| [39m        const a2Buff = llUnit?.effects.find(e => e.id === 'jing-yuan-aâ€¦
    [90m184| [39m        [34mexpect[39m(a2Buff)[33m.[39m[34mtoBeDefined[39m()[33m;[39m
    [90m   | [39m                       [31m^[39m
    [90m185| [39m        [34mexpect[39m(a2Buff[33m?.[39mmodifiers[33m?.[39m[[34m0[39m][33m.[39mvalue)[33m.[39m[34mtoBe[39m([34m0.25[39m)[33m;[39m
    [90m186| [39m    })[33m;[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/1]â¯[22m[39m


[2m Test Files [22m [1m[31m1 failed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[31m1 failed[39m[22m[2m | [22m[1m[32m7 passed[39m[22m[90m (8)[39m
[2m   Start at [22m 01:23:51
[2m   Duration [22m 1.05s

[1m[41m FAIL [49m[22m [31mTests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
c[3J[1m[44m RERUN [49m[22m [34m[2mapp/data/characters/jing-yuan.ts [22m[34mx5 [34m[39m
       [2m Filename pattern: [22m[34mjing-yuan.test.ts[39m

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould spawn Lightning-Lord with 6 stacks (technique) and 90 SPD at battle start
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updateLL] Stacks: 3, OwnerFound: true, HasA2: true
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updateLL] Stacks: 6, OwnerFound: true, HasA2: true
[updateLL] Applying A2 Buff
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould increase stacks and speed on Skill use
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updateLL] Stacks: 3, OwnerFound: true, HasA2: true
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updateLL] Stacks: 6, OwnerFound: true, HasA2: true
[updateLL] Applying A2 Buff
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould increase stacks and speed on Skill use
[22m[39m[SP] 3 -> 2 (-1) by jing-yuan-1
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[updateLL] Stacks: 8, OwnerFound: true, HasA2: true
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[updateLL] Applying A2 Buff
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[stepFinalizeActionLog] action=SKILL, hitDetails count=0, totalDamage=0.00
[ActionQueue] ç¥å›:90.9 > Test Enemy 1:100.0 > æ™¯å…ƒ:101.0
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould increase stacks and speed on Ultimate use
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updateLL] Stacks: 3, OwnerFound: true, HasA2: true
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updateLL] Stacks: 6, OwnerFound: true, HasA2: true
[updateLL] Applying A2 Buff
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould increase stacks and speed on Ultimate use
[22m[39m[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (9)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (9)'[39m ]
[updateLL] Stacks: 9, OwnerFound: true, HasA2: true
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (9)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (9)'[39m ]
[updateLL] Applying A2 Buff
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (9)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (9)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[stepFinalizeActionLog] action=ULTIMATE, hitDetails count=0, totalDamage=0.00
[ActionQueue] ç¥å›:83.3 > Test Enemy 1:100.0 > æ™¯å…ƒ:101.0

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould cap stacks at 10
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updateLL] Stacks: 3, OwnerFound: true, HasA2: true
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updateLL] Stacks: 6, OwnerFound: true, HasA2: true
[updateLL] Applying A2 Buff
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould cap stacks at 10
[22m[39m[SP] 3 -> 2 (-1) by jing-yuan-1
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[updateLL] Stacks: 8, OwnerFound: true, HasA2: true
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[updateLL] Applying A2 Buff
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[stepFinalizeActionLog] action=SKILL, hitDetails count=0, totalDamage=0.00
[ActionQueue] ç¥å›:90.9 > Test Enemy 1:100.0 > æ™¯å…ƒ:101.0
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (10)'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (10)'[39m ]
[updateLL] Stacks: 10, OwnerFound: true, HasA2: true
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (10)'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (10)'[39m ]
[updateLL] Applying A2 Buff
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (10)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (10)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[stepFinalizeActionLog] action=ULTIMATE, hitDetails count=0, totalDamage=0.00
[ActionQueue] ç¥å›:76.9 > Test Enemy 1:100.0 > æ™¯å…ƒ:101.0
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould reset stacks to 3 after Lightning-Lord action
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updateLL] Stacks: 3, OwnerFound: true, HasA2: true
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updateLL] Stacks: 6, OwnerFound: true, HasA2: true
[updateLL] Applying A2 Buff
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould reset stacks to 3 after Lightning-Lord action
[22m[39m[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updateLL] Stacks: 3, OwnerFound: true, HasA2: true

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould apply A6 Crit Rate buff after Skill
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updateLL] Stacks: 3, OwnerFound: true, HasA2: true
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updateLL] Stacks: 6, OwnerFound: true, HasA2: true
[updateLL] Applying A2 Buff
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould apply A6 Crit Rate buff after Skill
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updateLL] Stacks: 3, OwnerFound: true, HasA2: true
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updateLL] Stacks: 6, OwnerFound: true, HasA2: true
[updateLL] Applying A2 Buff
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[updateLL] Stacks: 8, OwnerFound: true, HasA2: true
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[updateLL] Applying A2 Buff
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould apply A2 Crit DMG buff to Lightning-Lord when stacks >= 6
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updateLL] Stacks: 3, OwnerFound: true, HasA2: true
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updateLL] Stacks: 6, OwnerFound: true, HasA2: true
[updateLL] Applying A2 Buff
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould apply A2 Crit DMG buff to Lightning-Lord when stacks >= 6
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updateLL] Stacks: 3, OwnerFound: true, HasA2: true
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updateLL] Stacks: 6, OwnerFound: true, HasA2: true
[updateLL] Applying A2 Buff
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould increase damage per hit with E6 (Vulnerability)
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updateLL] Stacks: 3, OwnerFound: true, HasA2: true
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updateLL] Stacks: 6, OwnerFound: true, HasA2: true
[updateLL] Applying A2 Buff
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould increase damage per hit with E6 (Vulnerability)
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 6
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 6
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updateLL] Stacks: 3, OwnerFound: true, HasA2: true
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updateLL] Stacks: 6, OwnerFound: true, HasA2: true
[updateLL] Applying A2 Buff
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[StatBuilder] Applying effect modifier: all_type_dmg_boost += 0.12 (add) from E6 Vulnerability (stack: 1)
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 1 effects [ [32m'E6è„†å¼±(1)'[39m ]
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[StatBuilder] Applying effect modifier: all_type_dmg_boost += 0.12 (add) from E6 Vulnerability (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 1 effects [ [32m'E6è„†å¼±(1)'[39m ]
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[EffectManager] Updating effect E6è„†å¼±(1): stack 1 -> 1, duration refreshed to 1
[StatBuilder] Applying effect modifier: all_type_dmg_boost += 0.12 (add) from E6 Vulnerability (stack: 1)
[EffectManager] Updating effect E6è„†å¼±(1): stack 1 -> 1, duration refreshed to 1
[StatBuilder] Applying effect modifier: all_type_dmg_boost += 0.12 (add) from E6 Vulnerability (stack: 1)
[EffectManager] Updating effect E6è„†å¼±(1): stack 1 -> 1, duration refreshed to 1
[StatBuilder] Applying effect modifier: all_type_dmg_boost += 0.12 (add) from E6 Vulnerability (stack: 1)
[EffectManager] Updating effect E6è„†å¼±(1): stack 1 -> 1, duration refreshed to 1
[StatBuilder] Applying effect modifier: all_type_dmg_boost += 0.12 (add) from E6 Vulnerability (stack: 1)
[EffectManager] Updating effect E6è„†å¼±(1): stack 1 -> 1, duration refreshed to 1
[StatBuilder] Applying effect modifier: all_type_dmg_boost += 0.12 (add) from E6 Vulnerability (stack: 1)
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 1 effects [ [32m'E6è„†å¼±(1)'[39m ]
  - ç¥å›: 1 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[StatBuilder] Applying effect modifier: all_type_dmg_boost += 0.12 (add) from E6 Vulnerability (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 1 effects [ [32m'E6è„†å¼±(1)'[39m ]
  - ç¥å›: 1 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 1 effects [ [32m'E6è„†å¼±(1)'[39m ]
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[StatBuilder] Applying effect modifier: all_type_dmg_boost += 0.12 (add) from E6 Vulnerability (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 1 effects [ [32m'E6è„†å¼±(1)'[39m ]
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updateLL] Stacks: 3, OwnerFound: true, HasA2: true
[StatBuilder] Applying effect modifier: all_type_dmg_boost += 0.2 (add) from E2 (stack: 1)
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 1 effects [ [32m'E2: ä¸ãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 1 effects [ [32m'E6è„†å¼±(1)'[39m ]
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[StatBuilder] Applying effect modifier: all_type_dmg_boost += 0.2 (add) from E2 (stack: 1)
[StatBuilder] Applying effect modifier: all_type_dmg_boost += 0.12 (add) from E6 Vulnerability (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 1 effects [ [32m'E2: ä¸ãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 1 effects [ [32m'E6è„†å¼±(1)'[39m ]
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 1 effects [ [32m'E2: ä¸ãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[StatBuilder] Applying effect modifier: all_type_dmg_boost += 0.2 (add) from E2 (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 1 effects [ [32m'E2: ä¸ãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]

 [32mâœ“[39m app/simulator/scenarios/jing-yuan.test.ts [2m([22m[2m8 tests[22m[2m)[22m[33m 321[2mms[22m[39m

[2m Test Files [22m [1m[32m1 passed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[32m8 passed[39m[22m[90m (8)[39m
[2m   Start at [22m 01:24:30
[2m   Duration [22m 1.03s

[1m[42m PASS [49m[22m [32mWaiting for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
c[3J[1m[44m RERUN [49m[22m [34m[2mapp/data/characters/jing-yuan.ts [22m[34mx6 [34m[39m
       [2m Filename pattern: [22m[34mjing-yuan.test.ts[39m

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould spawn Lightning-Lord with 6 stacks (technique) and 90 SPD at battle start
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould increase stacks and speed on Skill use
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould increase stacks and speed on Skill use
[22m[39m[SP] 3 -> 2 (-1) by jing-yuan-1
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[stepFinalizeActionLog] action=SKILL, hitDetails count=0, totalDamage=0.00
[ActionQueue] ç¥å›:90.9 > Test Enemy 1:100.0 > æ™¯å…ƒ:101.0
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould increase stacks and speed on Ultimate use
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould increase stacks and speed on Ultimate use
[22m[39m[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (9)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (9)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (9)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (9)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (9)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (9)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[stepFinalizeActionLog] action=ULTIMATE, hitDetails count=0, totalDamage=0.00
[ActionQueue] ç¥å›:83.3 > Test Enemy 1:100.0 > æ™¯å…ƒ:101.0

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould cap stacks at 10
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould cap stacks at 10
[22m[39m[SP] 3 -> 2 (-1) by jing-yuan-1
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[stepFinalizeActionLog] action=SKILL, hitDetails count=0, totalDamage=0.00
[ActionQueue] ç¥å›:90.9 > Test Enemy 1:100.0 > æ™¯å…ƒ:101.0
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (10)'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (10)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (10)'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (10)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (10)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (10)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[stepFinalizeActionLog] action=ULTIMATE, hitDetails count=0, totalDamage=0.00
[ActionQueue] ç¥å›:76.9 > Test Enemy 1:100.0 > æ™¯å…ƒ:101.0
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould reset stacks to 3 after Lightning-Lord action
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould reset stacks to 3 after Lightning-Lord action
[22m[39m[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould apply A6 Crit Rate buff after Skill
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould apply A6 Crit Rate buff after Skill
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould apply A2 Crit DMG buff to Lightning-Lord when stacks >= 6
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould apply A2 Crit DMG buff to Lightning-Lord when stacks >= 6
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould increase damage per hit with E6 (Vulnerability)
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould increase damage per hit with E6 (Vulnerability)
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 6
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 6
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[StatBuilder] Applying effect modifier: all_type_dmg_boost += 0.12 (add) from E6 Vulnerability (stack: 1)
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 1 effects [ [32m'E6è„†å¼±(1)'[39m ]
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[StatBuilder] Applying effect modifier: all_type_dmg_boost += 0.12 (add) from E6 Vulnerability (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 1 effects [ [32m'E6è„†å¼±(1)'[39m ]
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[EffectManager] Updating effect E6è„†å¼±(1): stack 1 -> 1, duration refreshed to 1
[StatBuilder] Applying effect modifier: all_type_dmg_boost += 0.12 (add) from E6 Vulnerability (stack: 1)
[EffectManager] Updating effect E6è„†å¼±(1): stack 1 -> 1, duration refreshed to 1
[StatBuilder] Applying effect modifier: all_type_dmg_boost += 0.12 (add) from E6 Vulnerability (stack: 1)
[EffectManager] Updating effect E6è„†å¼±(1): stack 1 -> 1, duration refreshed to 1
[StatBuilder] Applying effect modifier: all_type_dmg_boost += 0.12 (add) from E6 Vulnerability (stack: 1)
[EffectManager] Updating effect E6è„†å¼±(1): stack 1 -> 1, duration refreshed to 1
[StatBuilder] Applying effect modifier: all_type_dmg_boost += 0.12 (add) from E6 Vulnerability (stack: 1)
[EffectManager] Updating effect E6è„†å¼±(1): stack 1 -> 1, duration refreshed to 1
[StatBuilder] Applying effect modifier: all_type_dmg_boost += 0.12 (add) from E6 Vulnerability (stack: 1)
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 1 effects [ [32m'E6è„†å¼±(1)'[39m ]
  - ç¥å›: 1 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[StatBuilder] Applying effect modifier: all_type_dmg_boost += 0.12 (add) from E6 Vulnerability (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 1 effects [ [32m'E6è„†å¼±(1)'[39m ]
  - ç¥å›: 1 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 1 effects [ [32m'E6è„†å¼±(1)'[39m ]
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[StatBuilder] Applying effect modifier: all_type_dmg_boost += 0.12 (add) from E6 Vulnerability (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 1 effects [ [32m'E6è„†å¼±(1)'[39m ]
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[StatBuilder] Applying effect modifier: all_type_dmg_boost += 0.2 (add) from E2 (stack: 1)
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 1 effects [ [32m'E2: ä¸ãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 1 effects [ [32m'E6è„†å¼±(1)'[39m ]
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[StatBuilder] Applying effect modifier: all_type_dmg_boost += 0.2 (add) from E2 (stack: 1)
[StatBuilder] Applying effect modifier: all_type_dmg_boost += 0.12 (add) from E6 Vulnerability (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 1 effects [ [32m'E2: ä¸ãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 1 effects [ [32m'E6è„†å¼±(1)'[39m ]
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 1 effects [ [32m'E2: ä¸ãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[StatBuilder] Applying effect modifier: all_type_dmg_boost += 0.2 (add) from E2 (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 1 effects [ [32m'E2: ä¸ãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]

 [32mâœ“[39m app/simulator/scenarios/jing-yuan.test.ts [2m([22m[2m8 tests[22m[2m)[22m[33m 420[2mms[22m[39m

[2m Test Files [22m [1m[32m1 passed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[32m8 passed[39m[22m[90m (8)[39m
[2m   Start at [22m 01:25:43
[2m   Duration [22m 2.17s

[1m[42m PASS [49m[22m [32mWaiting for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
c[3J[1m[44m RERUN [49m[22m [34m[2mapp/data/characters/jing-yuan.ts [22m[34mx7 [34m[39m
       [2m Filename pattern: [22m[34mjing-yuan.test.ts[39m

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould spawn Lightning-Lord with 6 stacks (technique) and 90 SPD at battle start
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould increase stacks and speed on Skill use
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould increase stacks and speed on Skill use
[22m[39m[SP] 3 -> 2 (-1) by jing-yuan-1
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[stepFinalizeActionLog] action=SKILL, hitDetails count=0, totalDamage=0.00
[ActionQueue] ç¥å›:90.9 > Test Enemy 1:100.0 > æ™¯å…ƒ:101.0
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould increase stacks and speed on Ultimate use
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould increase stacks and speed on Ultimate use
[22m[39m[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (9)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (9)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (9)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (9)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (9)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (9)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[stepFinalizeActionLog] action=ULTIMATE, hitDetails count=0, totalDamage=0.00
[ActionQueue] ç¥å›:83.3 > Test Enemy 1:100.0 > æ™¯å…ƒ:101.0

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould cap stacks at 10
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould cap stacks at 10
[22m[39m[SP] 3 -> 2 (-1) by jing-yuan-1
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[stepFinalizeActionLog] action=SKILL, hitDetails count=0, totalDamage=0.00
[ActionQueue] ç¥å›:90.9 > Test Enemy 1:100.0 > æ™¯å…ƒ:101.0
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (10)'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (10)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (10)'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (10)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (10)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (10)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[stepFinalizeActionLog] action=ULTIMATE, hitDetails count=0, totalDamage=0.00
[ActionQueue] ç¥å›:76.9 > Test Enemy 1:100.0 > æ™¯å…ƒ:101.0
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould reset stacks to 3 after Lightning-Lord action
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould reset stacks to 3 after Lightning-Lord action
[22m[39m[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould apply A6 Crit Rate buff after Skill
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould apply A6 Crit Rate buff after Skill
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould apply A2 Crit DMG buff to Lightning-Lord when stacks >= 6
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould apply A2 Crit DMG buff to Lightning-Lord when stacks >= 6
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould increase damage per hit with E6 (Vulnerability)
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould increase damage per hit with E6 (Vulnerability)
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 6
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 6
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[StatBuilder] Applying effect modifier: all_type_dmg_boost += 0.12 (add) from E6 Vulnerability (stack: 1)
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 1 effects [ [32m'E6è„†å¼±(1)'[39m ]
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[StatBuilder] Applying effect modifier: all_type_dmg_boost += 0.12 (add) from E6 Vulnerability (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 1 effects [ [32m'E6è„†å¼±(1)'[39m ]
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[EffectManager] Updating effect E6è„†å¼±(1): stack 1 -> 1, duration refreshed to 1
[StatBuilder] Applying effect modifier: all_type_dmg_boost += 0.12 (add) from E6 Vulnerability (stack: 1)
[EffectManager] Updating effect E6è„†å¼±(1): stack 1 -> 1, duration refreshed to 1
[StatBuilder] Applying effect modifier: all_type_dmg_boost += 0.12 (add) from E6 Vulnerability (stack: 1)
[EffectManager] Updating effect E6è„†å¼±(1): stack 1 -> 1, duration refreshed to 1
[StatBuilder] Applying effect modifier: all_type_dmg_boost += 0.12 (add) from E6 Vulnerability (stack: 1)
[EffectManager] Updating effect E6è„†å¼±(1): stack 1 -> 1, duration refreshed to 1
[StatBuilder] Applying effect modifier: all_type_dmg_boost += 0.12 (add) from E6 Vulnerability (stack: 1)
[EffectManager] Updating effect E6è„†å¼±(1): stack 1 -> 1, duration refreshed to 1
[StatBuilder] Applying effect modifier: all_type_dmg_boost += 0.12 (add) from E6 Vulnerability (stack: 1)
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 1 effects [ [32m'E6è„†å¼±(1)'[39m ]
  - ç¥å›: 1 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[StatBuilder] Applying effect modifier: all_type_dmg_boost += 0.12 (add) from E6 Vulnerability (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 1 effects [ [32m'E6è„†å¼±(1)'[39m ]
  - ç¥å›: 1 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 1 effects [ [32m'E6è„†å¼±(1)'[39m ]
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[StatBuilder] Applying effect modifier: all_type_dmg_boost += 0.12 (add) from E6 Vulnerability (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 1 effects [ [32m'E6è„†å¼±(1)'[39m ]
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[StatBuilder] Applying effect modifier: all_type_dmg_boost += 0.2 (add) from E2 (stack: 1)
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 1 effects [ [32m'E2: ä¸ãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 1 effects [ [32m'E6è„†å¼±(1)'[39m ]
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[StatBuilder] Applying effect modifier: all_type_dmg_boost += 0.2 (add) from E2 (stack: 1)
[StatBuilder] Applying effect modifier: all_type_dmg_boost += 0.12 (add) from E6 Vulnerability (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 1 effects [ [32m'E2: ä¸ãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 1 effects [ [32m'E6è„†å¼±(1)'[39m ]
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 1 effects [ [32m'E2: ä¸ãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[StatBuilder] Applying effect modifier: all_type_dmg_boost += 0.2 (add) from E2 (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 1 effects [ [32m'E2: ä¸ãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]

 [32mâœ“[39m app/simulator/scenarios/jing-yuan.test.ts [2m([22m[2m8 tests[22m[2m)[22m[33m 503[2mms[22m[39m

[2m Test Files [22m [1m[32m1 passed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[32m8 passed[39m[22m[90m (8)[39m
[2m   Start at [22m 01:25:49
[2m   Duration [22m 1.15s

[1m[42m PASS [49m[22m [32mWaiting for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
c[3J[1m[44m RERUN [49m[22m [34m[2mapp/data/characters/jing-yuan.ts [22m[34mx8 [34m[39m
       [2m Filename pattern: [22m[34mjing-yuan.test.ts[39m

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould spawn Lightning-Lord with 6 stacks (technique) and 90 SPD at battle start
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould increase stacks and speed on Skill use
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould increase stacks and speed on Skill use
[22m[39m[SP] 3 -> 2 (-1) by jing-yuan-1
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[stepFinalizeActionLog] action=SKILL, hitDetails count=0, totalDamage=0.00
[ActionQueue] ç¥å›:90.9 > Test Enemy 1:100.0 > æ™¯å…ƒ:101.0
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould increase stacks and speed on Ultimate use
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould increase stacks and speed on Ultimate use
[22m[39m[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (9)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (9)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (9)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (9)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (9)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (9)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[stepFinalizeActionLog] action=ULTIMATE, hitDetails count=0, totalDamage=0.00
[ActionQueue] ç¥å›:83.3 > Test Enemy 1:100.0 > æ™¯å…ƒ:101.0

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould cap stacks at 10
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould cap stacks at 10
[22m[39m[SP] 3 -> 2 (-1) by jing-yuan-1
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[stepFinalizeActionLog] action=SKILL, hitDetails count=0, totalDamage=0.00
[ActionQueue] ç¥å›:90.9 > Test Enemy 1:100.0 > æ™¯å…ƒ:101.0
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (10)'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (10)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (10)'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (10)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (10)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (10)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[stepFinalizeActionLog] action=ULTIMATE, hitDetails count=0, totalDamage=0.00
[ActionQueue] ç¥å›:76.9 > Test Enemy 1:100.0 > æ™¯å…ƒ:101.0
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould reset stacks to 3 after Lightning-Lord action
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould reset stacks to 3 after Lightning-Lord action
[22m[39m[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould apply A6 Crit Rate buff after Skill
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould apply A6 Crit Rate buff after Skill
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould apply A2 Crit DMG buff to Lightning-Lord when stacks >= 6
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould apply A2 Crit DMG buff to Lightning-Lord when stacks >= 6
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould increase damage per hit with E6 (Vulnerability)
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould increase damage per hit with E6 (Vulnerability)
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 6
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 6
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[StatBuilder] Applying effect modifier: all_type_dmg_boost += 0.12 (add) from E6 Vulnerability (stack: 1)
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 1 effects [ [32m'E6è„†å¼±(1)'[39m ]
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[StatBuilder] Applying effect modifier: all_type_dmg_boost += 0.12 (add) from E6 Vulnerability (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 1 effects [ [32m'E6è„†å¼±(1)'[39m ]
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[EffectManager] Updating effect E6è„†å¼±(1): stack 1 -> 1, duration refreshed to 1
[StatBuilder] Applying effect modifier: all_type_dmg_boost += 0.12 (add) from E6 Vulnerability (stack: 1)
[EffectManager] Updating effect E6è„†å¼±(1): stack 1 -> 1, duration refreshed to 1
[StatBuilder] Applying effect modifier: all_type_dmg_boost += 0.12 (add) from E6 Vulnerability (stack: 1)
[EffectManager] Updating effect E6è„†å¼±(1): stack 1 -> 1, duration refreshed to 1
[StatBuilder] Applying effect modifier: all_type_dmg_boost += 0.12 (add) from E6 Vulnerability (stack: 1)
[EffectManager] Updating effect E6è„†å¼±(1): stack 1 -> 1, duration refreshed to 1
[StatBuilder] Applying effect modifier: all_type_dmg_boost += 0.12 (add) from E6 Vulnerability (stack: 1)
[EffectManager] Updating effect E6è„†å¼±(1): stack 1 -> 1, duration refreshed to 1
[StatBuilder] Applying effect modifier: all_type_dmg_boost += 0.12 (add) from E6 Vulnerability (stack: 1)
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 1 effects [ [32m'E6è„†å¼±(1)'[39m ]
  - ç¥å›: 1 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[StatBuilder] Applying effect modifier: all_type_dmg_boost += 0.12 (add) from E6 Vulnerability (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 1 effects [ [32m'E6è„†å¼±(1)'[39m ]
  - ç¥å›: 1 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 1 effects [ [32m'E6è„†å¼±(1)'[39m ]
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[StatBuilder] Applying effect modifier: all_type_dmg_boost += 0.12 (add) from E6 Vulnerability (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 1 effects [ [32m'E6è„†å¼±(1)'[39m ]
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[StatBuilder] Applying effect modifier: basic_atk_dmg_boost += 0.2 (add) from E2 (stack: 1)
[StatBuilder] Applying effect modifier: skill_dmg_boost += 0.2 (add) from E2 (stack: 1)
[StatBuilder] Applying effect modifier: ult_dmg_boost += 0.2 (add) from E2 (stack: 1)
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 1 effects [ [32m'E2: ä¸ãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 1 effects [ [32m'E6è„†å¼±(1)'[39m ]
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[StatBuilder] Applying effect modifier: basic_atk_dmg_boost += 0.2 (add) from E2 (stack: 1)
[StatBuilder] Applying effect modifier: skill_dmg_boost += 0.2 (add) from E2 (stack: 1)
[StatBuilder] Applying effect modifier: ult_dmg_boost += 0.2 (add) from E2 (stack: 1)
[StatBuilder] Applying effect modifier: all_type_dmg_boost += 0.12 (add) from E6 Vulnerability (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 1 effects [ [32m'E2: ä¸ãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 1 effects [ [32m'E6è„†å¼±(1)'[39m ]
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 1 effects [ [32m'E2: ä¸ãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[StatBuilder] Applying effect modifier: basic_atk_dmg_boost += 0.2 (add) from E2 (stack: 1)
[StatBuilder] Applying effect modifier: skill_dmg_boost += 0.2 (add) from E2 (stack: 1)
[StatBuilder] Applying effect modifier: ult_dmg_boost += 0.2 (add) from E2 (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 1 effects [ [32m'E2: ä¸ãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]

 [32mâœ“[39m app/simulator/scenarios/jing-yuan.test.ts [2m([22m[2m8 tests[22m[2m)[22m[33m 340[2mms[22m[39m

[2m Test Files [22m [1m[32m1 passed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[32m8 passed[39m[22m[90m (8)[39m
[2m   Start at [22m 01:26:04
[2m   Duration [22m 947ms

[1m[42m PASS [49m[22m [32mWaiting for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
c[3J[1m[44m RERUN [49m[22m [34m[2mapp/simulator/scenarios/jing-yuan.test.ts [22m[34mx9 [34m[39m
       [2m Filename pattern: [22m[34mjing-yuan.test.ts[39m

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould spawn Lightning-Lord with 6 stacks (technique) and 90 SPD at battle start
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould increase stacks and speed on Skill use
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould increase stacks and speed on Skill use
[22m[39m[SP] 3 -> 2 (-1) by jing-yuan-1
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[stepFinalizeActionLog] action=SKILL, hitDetails count=0, totalDamage=0.00
[ActionQueue] ç¥å›:90.9 > Test Enemy 1:100.0 > æ™¯å…ƒ:101.0
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould increase stacks and speed on Ultimate use
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould increase stacks and speed on Ultimate use
[22m[39m[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (9)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (9)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (9)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (9)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (9)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (9)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[stepFinalizeActionLog] action=ULTIMATE, hitDetails count=0, totalDamage=0.00
[ActionQueue] ç¥å›:83.3 > Test Enemy 1:100.0 > æ™¯å…ƒ:101.0

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould cap stacks at 10
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould cap stacks at 10
[22m[39m[SP] 3 -> 2 (-1) by jing-yuan-1
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[stepFinalizeActionLog] action=SKILL, hitDetails count=0, totalDamage=0.00
[ActionQueue] ç¥å›:90.9 > Test Enemy 1:100.0 > æ™¯å…ƒ:101.0
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (10)'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (10)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (10)'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (10)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (10)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (10)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[stepFinalizeActionLog] action=ULTIMATE, hitDetails count=0, totalDamage=0.00
[ActionQueue] ç¥å›:76.9 > Test Enemy 1:100.0 > æ™¯å…ƒ:101.0
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould reset stacks to 3 after Lightning-Lord action
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould reset stacks to 3 after Lightning-Lord action
[22m[39m[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould apply A6 Crit Rate buff after Skill
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould apply A6 Crit Rate buff after Skill
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[StatBuilder] Applying effect modifier: crit_rate += 0.1 (add) from A6 (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 1 effects [ [32m'A6: ä¼šå¿ƒç‡ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (8)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould apply A2 Crit DMG buff to Lightning-Lord when stacks >= 6
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould apply A2 Crit DMG buff to Lightning-Lord when stacks >= 6
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould increase damage per hit with E6 (Vulnerability)
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould increase damage per hit with E6 (Vulnerability)
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 6
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 6
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[StatBuilder] Applying effect modifier: all_type_dmg_boost += 0.12 (add) from E6 Vulnerability (stack: 1)
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 1 effects [ [32m'E6è„†å¼±(1)'[39m ]
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[StatBuilder] Applying effect modifier: all_type_dmg_boost += 0.12 (add) from E6 Vulnerability (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 1 effects [ [32m'E6è„†å¼±(1)'[39m ]
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[EffectManager] Updating effect E6è„†å¼±(1): stack 1 -> 1, duration refreshed to 1
[StatBuilder] Applying effect modifier: all_type_dmg_boost += 0.12 (add) from E6 Vulnerability (stack: 1)
[EffectManager] Updating effect E6è„†å¼±(1): stack 1 -> 1, duration refreshed to 1
[StatBuilder] Applying effect modifier: all_type_dmg_boost += 0.12 (add) from E6 Vulnerability (stack: 1)
[EffectManager] Updating effect E6è„†å¼±(1): stack 1 -> 1, duration refreshed to 1
[StatBuilder] Applying effect modifier: all_type_dmg_boost += 0.12 (add) from E6 Vulnerability (stack: 1)
[EffectManager] Updating effect E6è„†å¼±(1): stack 1 -> 1, duration refreshed to 1
[StatBuilder] Applying effect modifier: all_type_dmg_boost += 0.12 (add) from E6 Vulnerability (stack: 1)
[EffectManager] Updating effect E6è„†å¼±(1): stack 1 -> 1, duration refreshed to 1
[StatBuilder] Applying effect modifier: all_type_dmg_boost += 0.12 (add) from E6 Vulnerability (stack: 1)
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 1 effects [ [32m'E6è„†å¼±(1)'[39m ]
  - ç¥å›: 1 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[StatBuilder] Applying effect modifier: all_type_dmg_boost += 0.12 (add) from E6 Vulnerability (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 1 effects [ [32m'E6è„†å¼±(1)'[39m ]
  - ç¥å›: 1 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 1 effects [ [32m'E6è„†å¼±(1)'[39m ]
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[StatBuilder] Applying effect modifier: all_type_dmg_boost += 0.12 (add) from E6 Vulnerability (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 1 effects [ [32m'E6è„†å¼±(1)'[39m ]
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[StatBuilder] Applying effect modifier: basic_atk_dmg_boost += 0.2 (add) from E2 (stack: 1)
[StatBuilder] Applying effect modifier: skill_dmg_boost += 0.2 (add) from E2 (stack: 1)
[StatBuilder] Applying effect modifier: ult_dmg_boost += 0.2 (add) from E2 (stack: 1)
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 1 effects [ [32m'E2: ä¸ãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 1 effects [ [32m'E6è„†å¼±(1)'[39m ]
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[StatBuilder] Applying effect modifier: basic_atk_dmg_boost += 0.2 (add) from E2 (stack: 1)
[StatBuilder] Applying effect modifier: skill_dmg_boost += 0.2 (add) from E2 (stack: 1)
[StatBuilder] Applying effect modifier: ult_dmg_boost += 0.2 (add) from E2 (stack: 1)
[StatBuilder] Applying effect modifier: all_type_dmg_boost += 0.12 (add) from E6 Vulnerability (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 1 effects [ [32m'E2: ä¸ãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 1 effects [ [32m'E6è„†å¼±(1)'[39m ]
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 1 effects [ [32m'E2: ä¸ãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[StatBuilder] Applying effect modifier: basic_atk_dmg_boost += 0.2 (add) from E2 (stack: 1)
[StatBuilder] Applying effect modifier: skill_dmg_boost += 0.2 (add) from E2 (stack: 1)
[StatBuilder] Applying effect modifier: ult_dmg_boost += 0.2 (add) from E2 (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 1 effects [ [32m'E2: ä¸ãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould apply E2 Damage Boosts to Basic, Skill, and Ultimate after LL action
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 0
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 0
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]

[90mstdout[2m | app/simulator/scenarios/jing-yuan.test.ts[2m > [22m[2mJing Yuan Scenario Test[2m > [22m[2mshould apply E2 Damage Boosts to Basic, Skill, and Ultimate after LL action
[22m[39m[createInitialGameState] Character jing-yuan-1 Eidolon Level: 2
[applyCharacterMechanics] Called for jing-yuan-1, Eidolon: 2
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 0 effects []
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'æ”»æ’ƒæ®µæ•° (6)'[39m, [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 1 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 0 effects []
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[StatBuilder] Applying effect modifier: basic_atk_dmg_boost += 0.2 (add) from E2 (stack: 1)
[StatBuilder] Applying effect modifier: skill_dmg_boost += 0.2 (add) from E2 (stack: 1)
[StatBuilder] Applying effect modifier: ult_dmg_boost += 0.2 (add) from E2 (stack: 1)
[updatePassiveBuffs] Units at start:
  - æ™¯å…ƒ: 1 effects [ [32m'E2: ä¸ãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]
[StatBuilder] Applying effect modifier: basic_atk_dmg_boost += 0.2 (add) from E2 (stack: 1)
[StatBuilder] Applying effect modifier: skill_dmg_boost += 0.2 (add) from E2 (stack: 1)
[StatBuilder] Applying effect modifier: ult_dmg_boost += 0.2 (add) from E2 (stack: 1)
[updatePassiveBuffs] Units before return:
  - æ™¯å…ƒ: 1 effects [ [32m'E2: ä¸ãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m ]
  - Test Enemy 1: 0 effects []
  - ç¥å›: 2 effects [ [32m'A2: ä¼šå¿ƒãƒ€ãƒ¡ãƒ¼ã‚¸ä¸Šæ˜‡'[39m, [32m'æ”»æ’ƒæ®µæ•° (3)'[39m ]

 [32mâœ“[39m app/simulator/scenarios/jing-yuan.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 231[2mms[22m[39m

[2m Test Files [22m [1m[32m1 passed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[32m9 passed[39m[22m[90m (9)[39m
[2m   Start at [22m 01:26:35
[2m   Duration [22m 955ms

[1m[42m PASS [49m[22m [32mWaiting for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
