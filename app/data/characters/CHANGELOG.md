# å¤‰æ›´å±¥æ­´ (Changelog)

ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã¯ã€Honkai: Star Rail Simulatorã®é–‹ç™ºã«ãŠã‘ã‚‹é‡è¦ãªå¤‰æ›´ç‚¹ã¨ãƒžã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚¬ã‚¤ãƒ‰ã‚’è¨˜éŒ²ã—ã¾ã™ã€‚

---

## 2025-12-27: ã‚¢ã‚°ãƒ©ã‚¤ã‚¢æ©Ÿèƒ½ä¿®æ­£ã¨å…‰å††éŒæ”¹ä¿®

### ã‚¢ã‚°ãƒ©ã‚¤ã‚¢ã®å¤©è³¦ãƒˆãƒªã‚¬ãƒ¼ä¿®æ­£

ã‚¢ã‚°ãƒ©ã‚¤ã‚¢ã®å¤©è³¦ãŠã‚ˆã³ç²¾éœŠå¤©è³¦ï¼ˆé€Ÿåº¦ãƒãƒ•ï¼‰ã®ç™ºå‹•æ¡ä»¶ã‚’ä¿®æ­£ã—ã€æ­£ã—ãå‹•ä½œã™ã‚‹ã‚ˆã†ã«ã—ã¾ã—ãŸã€‚

**å¤‰æ›´å†…å®¹:**
- ãƒˆãƒªã‚¬ãƒ¼ã‚¤ãƒ™ãƒ³ãƒˆã‚’ `ON_ACTION_COMPLETE` ã‹ã‚‰ `ON_ATTACK` ã«å¤‰æ›´
- ã“ã‚Œã«ã‚ˆã‚Šã€æ”»æ’ƒå¯¾è±¡ (`targetId`) ãŒæ­£ã—ãå‚ç…§ã•ã‚Œã€ã€Œéš™ã‚’ç¸«ã†ç³¸ã€çŠ¶æ…‹ã®æ•µã¸ã®æ”»æ’ƒåˆ¤å®šãŒæ©Ÿèƒ½ã™ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸ
- ç²¾éœŠã€Œãƒ©ãƒ•ãƒˆãƒ©ã€ãŒæ”»æ’ƒæ™‚ã«æ­£ã—ãé€Ÿåº¦ãƒãƒ•ã‚’ç²å¾—ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸ
- E1ï¼ˆEPå›žå¾©ï¼‰ãŠã‚ˆã³E5ï¼ˆä»˜åŠ ãƒ€ãƒ¡ãƒ¼ã‚¸ï¼‰ã®åŠ¹æžœã‚‚åŒæ§˜ã«ä¿®æ­£ã•ã‚Œã¾ã—ãŸ

**å½±éŸ¿ã‚’å—ã‘ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«:**
- `app/data/characters/aglaea.ts`

### å…‰å††éŒã€Œå…‰é™°ã‚’ç¹”ã‚Šé»„é‡‘ã¨æˆã™ã€ã®ç²¾éœŠãƒãƒ•å¯¾å¿œ

å…‰å††éŒã€Œå…‰é™°ã‚’ç¹”ã‚Šé»„é‡‘ã¨æˆã™ã€ã®åŠ¹æžœã€ŒéŒ¦ã‚’ç¹”ã£ã¦ã€ãŒã€è£…å‚™è€…ã®è¨˜æ†¶ã®ç²¾éœŠã«ã‚‚æ­£ã—ãä»˜ä¸Žã•ã‚Œã‚‹ã‚ˆã†ã«ä¿®æ­£ã—ã¾ã—ãŸã€‚

**å¤‰æ›´å†…å®¹:**
- åŠ¹æžœç™ºå‹•æ™‚ã€è£…å‚™è€…ã ã‘ã§ãªãã€ãã®è£…å‚™è€…ãŒå¬å–šã—ãŸã™ã¹ã¦ã®è¨˜æ†¶ã®ç²¾éœŠã«ã‚‚åŒç­‰ã®ãƒãƒ•ã‚’ä»˜ä¸Žã™ã‚‹ã‚ˆã†ã«ä¿®æ­£
- ã‚¹ã‚¿ãƒƒã‚¯æ•°ã¯è£…å‚™è€…ã®ã‚‚ã®ã‚’åŸºæº–ã«åŒæœŸã•ã‚Œã¾ã™

**å½±éŸ¿ã‚’å—ã‘ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«:**
- `app/data/light-cones/weaving-time-into-gold.ts`

---

## 2025-12-27: è¡Œå‹•ãƒ­ã‚°çµ±åˆãƒãƒªã‚·ãƒ¼å¯¾å¿œ

### æ–¹é‡

ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®è¡Œå‹•ãƒ­ã‚°ã«å¯¾ã™ã‚‹ä»¥ä¸‹ã®ãƒãƒªã‚·ãƒ¼ã‚’é©ç”¨ã—ã¾ã—ãŸï¼š

1. **1ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã®ãƒ­ã‚°ã¯ã™ã¹ã¦çµ±åˆã™ã‚‹** - åŒä¸€ã‚¢ã‚¯ã‚·ãƒ§ãƒ³å†…ã§ç™ºç”Ÿã™ã‚‹å›žå¾©ãƒ»ã‚·ãƒ¼ãƒ«ãƒ‰ãƒ»ä»˜åŠ ãƒ€ãƒ¡ãƒ¼ã‚¸ãªã©ã¯ `currentActionLog` ã«çµ±åˆ
2. **è¨ˆç®—å¼ãŒå­˜åœ¨ã™ã‚Œã°ã™ã¹ã¦è¡¨ç¤ºã™ã‚‹** - `breakdownMultipliers` ã‚’å¿…ãšå«ã‚ã‚‹

### ãƒŸãƒ¥ãƒªã‚ªãƒ³ã®ç¢ºå®šãƒ€ãƒ¡ãƒ¼ã‚¸ï¼ˆè¨˜æ†¶é–‹æ‹“è€…ï¼‰

`onDamageDealt`ã§ç™ºç”Ÿã™ã‚‹ã€ŒãƒŸãƒ¥ãƒªã‚ªãƒ³ã®å¿œæ´ã€ã«ã‚ˆã‚‹ç¢ºå®šãƒ€ãƒ¡ãƒ¼ã‚¸ã‚’è¡Œå‹•ãƒ­ã‚°çµ±åˆãƒãƒªã‚·ãƒ¼ã«å¯¾å¿œã—ã¾ã—ãŸã€‚

**å¤‰æ›´å†…å®¹:**
- `calculateTrueDamage` ã‚’ `calculateTrueDamageWithBreakdown` ã«å¤‰æ›´ã—ã€è¨ˆç®—å¼å†…è¨³ã‚’å–å¾—
- `applyUnifiedDamage` ã« `skipLog: true` ã‚’è¨­å®šã—ã€å€‹åˆ¥ãƒ­ã‚°ã‚’å‰Šé™¤
- `additionalDamageEntry` ã‚’è¿½åŠ ã—ã€çµ±åˆãƒ­ã‚°ã«ç¢ºå®šãƒ€ãƒ¡ãƒ¼ã‚¸ã‚’è¿½è¨˜
- `damageType: 'true_damage'` ã‚’æŒ‡å®šã—ã€UIã§`[ç¢ºå®š]`ãƒ©ãƒ™ãƒ«ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã‚ˆã†ã«

**å½±éŸ¿ã‚’å—ã‘ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«:**
- `app/data/characters/trailblazer-remembrance.ts`

### ã‚¢ã‚°ãƒ©ã‚¤ã‚¢ã®å¼·åŒ–é€šå¸¸æ”»æ’ƒã€Œå‰£å…ˆã‚ˆã‚Šåƒã®å£ä»˜ã‘ã‚’ã€

ã‚¢ã‚°ãƒ©ã‚¤ã‚¢ã¨ãƒ©ãƒ•ãƒˆãƒ©ã®é€£æºæ”»æ’ƒï¼ˆå¼·åŒ–é€šå¸¸æ”»æ’ƒï¼‰ã®ãƒ­ã‚°ã‚’çµ±åˆã—ã¾ã—ãŸã€‚

**å¤‰æ›´å†…å®¹:**
- `onEnhancedBasicAttack` é–¢æ•°å†…ã®ã™ã¹ã¦ã® `applyUnifiedDamage` å‘¼ã³å‡ºã—ã« `skipLog: true` ã‚’è¨­å®š
- **`calculateDamageWithCritInfo` ã‚’ä½¿ç”¨ã—ã¦é€šå¸¸æ”»æ’ƒãƒ€ãƒ¡ãƒ¼ã‚¸ãƒ–ãƒ¼ã‚¹ãƒˆï¼ˆ`basic_atk_dmg_boost`ï¼‰ãŒé©ç”¨ã•ã‚Œã‚‹ã‚ˆã†ã«ä¿®æ­£**
- `additionalDamageEntry` ã‚’è¿½åŠ ã—ã€çµ±åˆãƒ­ã‚°ã«ä»¥ä¸‹ã®ãƒ€ãƒ¡ãƒ¼ã‚¸ã‚’è¿½è¨˜:
  - ã‚¢ã‚°ãƒ©ã‚¤ã‚¢é€£æºæ”»æ’ƒï¼ˆå˜ä½“ï¼‰
  - ãƒ©ãƒ•ãƒˆãƒ©é€£æºæ”»æ’ƒï¼ˆå˜ä½“ï¼‰
  - ã‚¢ã‚°ãƒ©ã‚¤ã‚¢é€£æºæ”»æ’ƒï¼ˆéš£æŽ¥ï¼‰
  - ãƒ©ãƒ•ãƒˆãƒ©é€£æºæ”»æ’ƒï¼ˆéš£æŽ¥ï¼‰
- `damageType: 'normal'` ã‚’ä½¿ç”¨ï¼ˆä»˜åŠ ãƒ€ãƒ¡ãƒ¼ã‚¸ã§ã¯ãªãé€šå¸¸ãƒ€ãƒ¡ãƒ¼ã‚¸ã¨ã—ã¦è¡¨ç¤ºï¼‰

**é€šå¸¸æ”»æ’ƒãƒ€ãƒ¡ãƒ¼ã‚¸ãƒ–ãƒ¼ã‚¹ãƒˆå¯¾å¿œ:**
- `calculateDmgBoost` é–¢æ•°ã‚’ä¿®æ­£ã—ã€`ENHANCED_BASIC_ATTACK` ã§ã‚‚ `basic_atk_dmg_boost` ãŒé©ç”¨ã•ã‚Œã‚‹ã‚ˆã†ã«å¤‰æ›´
- ãƒ‡ã‚£ã‚¹ãƒ‘ãƒƒãƒãƒ£ãƒ¼ã¨åŒæ§˜ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ `IAbility` ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã—ã€`calculateDamageWithCritInfo` ã‚’ä½¿ç”¨

**æ–°è¦è¿½åŠ : `AdditionalDamageType`ã«`'normal'`ã‚¿ã‚¤ãƒ—**
- é€£æºæ”»æ’ƒãªã©ã€ä»˜åŠ ãƒ€ãƒ¡ãƒ¼ã‚¸ã§ã¯ãªã„é€šå¸¸ãƒ€ãƒ¡ãƒ¼ã‚¸ã‚’ãƒ­ã‚°ã«è¿½è¨˜ã™ã‚‹å ´åˆã«ä½¿ç”¨
- UIã§ã¯ãƒ©ãƒ™ãƒ«ãªã—ã§è¡¨ç¤ºã•ã‚Œã‚‹

**å½±éŸ¿ã‚’å—ã‘ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«:**
- `app/data/characters/aglaea.ts`
- `app/simulator/damage.ts` (calculateDmgBoosté–¢æ•°)
- `app/types/index.ts` (AdditionalDamageType)
- `app/simulator/engine/types.ts` (DamageOptions)
- `app/components/SimulationLogTable.tsx` (UI)

### ä¿®æ­£å†…å®¹

#### 1. utils.ts - äºŒé‡ãƒ­ã‚°å•é¡Œã®è§£æ¶ˆ

`applyHealing` ã¨ `applyShield` é–¢æ•°ãŒã€å€‹åˆ¥ãƒ­ã‚°ã¨çµ±åˆãƒ­ã‚°ï¼ˆ`appendHealing`/`appendShield`ï¼‰ã®ä¸¡æ–¹ã‚’è¿½åŠ ã™ã‚‹äºŒé‡ãƒ­ã‚°å•é¡Œã‚’ä¿®æ­£ã—ã¾ã—ãŸã€‚

**å¤‰æ›´:**
- å€‹åˆ¥ãƒ­ã‚°è¿½åŠ ï¼ˆ`state.log = [...state.log, {...}]`ï¼‰ã‚’å‰Šé™¤
- `appendHealing`/`appendShield` ã«ã‚ˆã‚‹çµ±åˆãƒ­ã‚°ã®ã¿ã‚’ä½¿ç”¨
- `skipLog` ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¯çµ±åˆãƒ­ã‚°ã¸ã®è¿½è¨˜ã‚‚åˆ¶å¾¡ã™ã‚‹ã‚ˆã†ã«å¤‰æ›´

**å½±éŸ¿ã‚’å—ã‘ã‚‹é–¢æ•°:**
- `applyHealing()` - å€‹åˆ¥ãƒ­ã‚°å‰Šé™¤ã€çµ±åˆãƒ­ã‚°ã®ã¿
- `applyShield()` - å€‹åˆ¥ãƒ­ã‚°å‰Šé™¤ã€çµ±åˆãƒ­ã‚°ã®ã¿
- `cleanse()` - å€‹åˆ¥ãƒ­ã‚°ã‚’ `appendEquipmentEffect` ã«å¤‰æ›´
- `dispelBuffs()` - å€‹åˆ¥ãƒ­ã‚°ã‚’ `appendEquipmentEffect` ã«å¤‰æ›´

#### 2. shieldManager.ts - çµ±åˆãƒ­ã‚°å¯¾å¿œ

`applyStackableShield` é–¢æ•°ãŒå€‹åˆ¥ãƒ­ã‚°ã‚’è¿½åŠ ã—ã¦ã„ãŸå•é¡Œã‚’ä¿®æ­£ã€‚

**å¤‰æ›´:**
- å€‹åˆ¥ãƒ­ã‚°ã‚’å‰Šé™¤
- `appendShield` ã‚’ä½¿ç”¨ã—ã¦çµ±åˆãƒ­ã‚°ã«è¿½è¨˜
- `breakdownMultipliers` ã‚’å«ã‚ã¦è¨ˆç®—å¼ã‚’è¡¨ç¤ºå¯èƒ½ã«

#### 3. å…‰å††éŒãƒ•ã‚¡ã‚¤ãƒ« - å€‹åˆ¥ãƒ­ã‚°ã®å‰Šé™¤ãƒ»çµ±åˆãƒ­ã‚°å¯¾å¿œ

**EPå›žå¾©ã®å€‹åˆ¥ãƒ­ã‚°ã‚’å‰Šé™¤:**
EPå›žå¾©ã¯ `resourceChanges` ã§è‡ªå‹•çš„ã«è¡¨ç¤ºã•ã‚Œã‚‹ãŸã‚ã€å€‹åˆ¥ãƒ­ã‚°ã¯ä¸è¦ã§ã™ã€‚

- `meshing-cogs.ts` (è¼ªå¥‘)
- `before-the-tutorial-mission-starts.ts` (åˆã‚ã¦ã®ã‚¯ã‚¨ã‚¹ãƒˆã®å‰ã«)
- `memories-of-the-past.ts` (è¨˜æ†¶ã®ä¸­ã®å§¿)
- `solitary-healing.ts` (å­¤ç‹¬ã®ç™’ã—)

**ä»˜åŠ ãƒ€ãƒ¡ãƒ¼ã‚¸ã®ãƒ­ã‚°ã‚’çµ±åˆ:**
å€‹åˆ¥ãƒ­ã‚°ã‚’ `appendAdditionalDamage` ã«å¤‰æ›´ã—ã€`breakdownMultipliers` ã‚’å«ã‚ã¾ã—ãŸã€‚

- `we-will-meet-again.ts` (ã¾ãŸãŠä¼šã„ã—ã¾ã—ã‚‡ã†)
- `time-waits-for-no-one.ts` (æ™‚ç¯€ã¯å±…ã‚‰ãš)
- `so-the-rainbow-doesnt-fade.ts` (ç©ºã®è™¹ãŒæ¶ˆãˆã¬ã‚ˆã†ã«)
- `hidden-shadow.ts` (åŒ¿å½±)

### å½±éŸ¿ã‚’å—ã‘ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«

- `app/simulator/engine/utils.ts`
- `app/simulator/engine/shieldManager.ts`
- `app/data/light-cones/meshing-cogs.ts`
- `app/data/light-cones/before-the-tutorial-mission-starts.ts`
- `app/data/light-cones/memories-of-the-past.ts`
- `app/data/light-cones/solitary-healing.ts`
- `app/data/light-cones/we-will-meet-again.ts`
- `app/data/light-cones/time-waits-for-no-one.ts`
- `app/data/light-cones/so-the-rainbow-doesnt-fade.ts`
- `app/data/light-cones/hidden-shadow.ts`

### ä¾‹å¤–: æˆ¦é—˜é–‹å§‹æ™‚ã®ãƒ­ã‚°

æˆ¦é—˜é–‹å§‹æ™‚ï¼ˆ`ON_BATTLE_START`ï¼‰ã®ãƒ­ã‚°ã¯**ã‚¢ã‚¯ã‚·ãƒ§ãƒ³å¤–**ã§ã‚ã‚Šã€`currentActionLog` ãŒå­˜åœ¨ã—ãªã„ãŸã‚ã€å€‹åˆ¥ãƒ­ã‚°ã‚’ç¶­æŒã—ã¦ã„ã¾ã™ã€‚

- ç§˜æŠ€ã®ç™ºå‹•ãƒ­ã‚°
- E2ãªã©ã®æˆ¦é—˜é–‹å§‹æ™‚ãƒãƒ•ã®ãƒ­ã‚°

---


### ãƒŸãƒ¥ãƒªã‚ªãƒ³ã€Œã‚ãŸã—ãŒåŠ©ã‘ã‚‹ï¼ã€ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³æ¨™æº–åŒ–

ãƒŸãƒ¥ãƒªã‚ªãƒ³ã®ãƒãƒ£ãƒ¼ã‚¸100%ç™ºå‹•ã‚¹ã‚­ãƒ«ã€Œã‚ãŸã—ãŒåŠ©ã‘ã‚‹ï¼ã€ã®å‡¦ç†ã‚’ã€æ¨™æº–çš„ãªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚­ãƒ¥ãƒ¼ï¼ˆ`pendingActions`ï¼‰ã‚’ä½¿ç”¨ã™ã‚‹å½¢å¼ã«å¤‰æ›´ã—ã¾ã—ãŸã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ä»¥ä¸‹ã®æ”¹å–„ãŒè¡Œã‚ã‚Œã¾ã—ãŸï¼š

1. **ãƒ­ã‚°ã®æ¨™æº–åŒ–**: è¡Œå‹•æ™‚é–“ã€SPæ®‹é‡ã€HPçŠ¶æ…‹ãªã©ãŒä»–ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã¨åŒæ§˜ã«è¡¨ç¤ºã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚
2. **å‡¦ç†ãƒ•ãƒ­ãƒ¼ã®çµ±ä¸€**: ä»–ã®è¨˜æ†¶ã®ç²¾éœŠï¼ˆã‚¢ã‚°ãƒ©ã‚¤ã‚¢ã®ãƒ©ãƒ•ãƒˆãƒ©ç­‰ï¼‰ã¨åŒã˜ã‚¤ãƒ™ãƒ³ãƒˆã‚µã‚¤ã‚¯ãƒ«ã§å‡¦ç†ã•ã‚Œã¾ã™ã€‚
3. **æ‹¡å¼µæ€§ã®å‘ä¸Š**: `SkillAction` åž‹å®šç¾©ã‚’æ‹¡å¼µã—ã€ã‚«ã‚¹ã‚¿ãƒ ã‚¹ã‚­ãƒ«ID (`abilityId`) ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¾ã—ãŸã€‚

**å½±éŸ¿ã‚’å—ã‘ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«:**
- `app/data/characters/trailblazer-remembrance.ts`
- `app/simulator/engine/types.ts`

### ãƒŸãƒ¥ãƒªã‚ªãƒ³ã®ãƒãƒ£ãƒ¼ã‚¸å€¤è¡¨ç¤ºæ”¹å–„


ãƒŸãƒ¥ãƒªã‚ªãƒ³ã®ãƒãƒ£ãƒ¼ã‚¸å€¤ã‚’0.0ã€œ1.0ï¼ˆå‰²åˆï¼‰ã‹ã‚‰0ã€œ100ï¼ˆãƒ‘ãƒ¼ã‚»ãƒ³ãƒˆå€¤ï¼‰ã«å¤‰æ›´ã—ã¾ã—ãŸã€‚
ã“ã‚Œã«ã‚ˆã‚Šã€è¡Œå‹•ãƒ­ã‚°ã®ã€Œã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ»åŠ¹æžœè©³ç´°ã€ã§ã®è¡¨ç¤ºãŒã‚ˆã‚Šåˆ†ã‹ã‚Šã‚„ã™ããªã‚Šã¾ã™ã€‚

**å¤‰æ›´å†…å®¹:**
- ãƒãƒ£ãƒ¼ã‚¸é–¢é€£å®šæ•°ã‚’æ•´æ•°ãƒ‘ãƒ¼ã‚»ãƒ³ãƒˆå€¤ã«å¤‰æ›´ï¼ˆä¾‹: `0.10` â†’ `10`ï¼‰
- `CHARGE_MAX = 100` å®šæ•°ã‚’è¿½åŠ 
- ã‚¨ãƒ•ã‚§ã‚¯ãƒˆè¡¨ç¤ºåã‚’ `è“„ç©: ãƒãƒ£ãƒ¼ã‚¸` ã«å¤‰æ›´ï¼ˆæ—§: `è“„ç©: murion-charge`ï¼‰

**UIã§ã®è¡¨ç¤º:**
- åŠ¹æžœè©³ç´°ã®ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—ã§ã€Œè“„ç©å€¤: 75ã€ã®ã‚ˆã†ã«æ•´æ•°ã§è¡¨ç¤ºã•ã‚Œã¾ã™
- åŠ¹æžœåã«ã€Œè“„ç©: ãƒãƒ£ãƒ¼ã‚¸ (75)ã€ã®ã‚ˆã†ã«å€¤ãŒå«ã¾ã‚Œã¾ã™

**å½±éŸ¿ã‚’å—ã‘ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«:**
- `app/data/characters/trailblazer-remembrance.ts`

### è¡Œå‹•ãƒ­ã‚°ã«EPãƒ»è“„ç©å€¤å¤‰åŒ–ã‚’è¿½åŠ 

è¡Œå‹•ãƒ­ã‚°ã®è©³ç´°ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«ã€ã‚¢ã‚¯ã‚·ãƒ§ãƒ³å‰å¾Œã®EPå¤‰åŒ–ã¨è“„ç©å€¤å¤‰åŒ–ã‚’è¡¨ç¤ºã™ã‚‹æ©Ÿèƒ½ã‚’è¿½åŠ ã—ã¾ã—ãŸã€‚

**è¡¨ç¤ºå†…å®¹:**
- **âš¡ EPå¤‰åŒ–**: å„ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã®EPå¤‰åŒ–ï¼ˆå‰ â†’ å¾Œï¼‰
- **ðŸ“Š è“„ç©å€¤å¤‰åŒ–**: ãƒãƒ£ãƒ¼ã‚¸ãªã©ã®è“„ç©å€¤ã®å¤‰åŒ–ï¼ˆå‰ â†’ å¾Œï¼‰

**å®Ÿè£…è©³ç´°:**
- ã‚¢ã‚¯ã‚·ãƒ§ãƒ³é–‹å§‹æ™‚ã«ã™ã¹ã¦ã®ãƒ¦ãƒ‹ãƒƒãƒˆã®EPã¨è“„ç©å€¤ã®ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã‚’å–å¾—
- ã‚¢ã‚¯ã‚·ãƒ§ãƒ³çµ‚äº†æ™‚ã«ç¾åœ¨å€¤ã¨æ¯”è¼ƒã—ã€å¤‰åŒ–ãŒã‚ã£ãŸã‚‚ã®ã‚’ãƒ­ã‚°ã«è¨˜éŒ²
- å¤‰åŒ–ãŒãªã„å ´åˆã¯è¡¨ç¤ºã•ã‚Œãªã„

**æ–°è¦åž‹å®šç¾©:**
- `ResourceChangeEntry`: ãƒªã‚½ãƒ¼ã‚¹å¤‰åŒ–ã‚’è¡¨ã™ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
  - `unitId`, `unitName`: ãƒ¦ãƒ‹ãƒƒãƒˆæƒ…å ±
  - `resourceType`: `'ep'` ã¾ãŸã¯ `'accumulator'`
  - `resourceName`: ãƒªã‚½ãƒ¼ã‚¹åï¼ˆEPã¾ãŸã¯è“„ç©ã‚­ãƒ¼ï¼‰
  - `before`, `after`, `change`: å¤‰åŒ–å€¤

**å½±éŸ¿ã‚’å—ã‘ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«:**
- `app/types/index.ts` - ResourceChangeEntryåž‹è¿½åŠ 
- `app/simulator/engine/types.ts` - CurrentActionLogæ‹¡å¼µ
- `app/simulator/engine/dispatcher.ts` - ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆå–å¾—ãƒ»å¤‰åŒ–è¨ˆç®—
- `app/components/SimulationLogTable.tsx` - ResourceChangesDetailsè¡¨ç¤º

### ãƒŸãƒ¥ãƒªã‚ªãƒ³ã®ãƒãƒ£ãƒ¼ã‚¸100%åˆ°é”æ™‚ã®å³æ™‚è¡Œå‹•

ãƒŸãƒ¥ãƒªã‚ªãƒ³ã®ãƒãƒ£ãƒ¼ã‚¸ãŒ100%ã«é”ã—ãŸéš›ã€**å³åº§ã«**ã€Œã‚ãŸã—ãŒåŠ©ã‘ã‚‹ï¼ã€ã‚’ç™ºå‹•ã™ã‚‹ã‚ˆã†ã«ä¿®æ­£ã—ã¾ã—ãŸã€‚
ä»¥å‰ã¯ãƒŸãƒ¥ãƒªã‚ªãƒ³ã®ã‚¿ãƒ¼ãƒ³é–‹å§‹æ™‚ã«åˆ¤å®šã—ã¦ã„ã¾ã—ãŸãŒã€ä»•æ§˜ã«åˆã‚ã›ã¦ãƒãƒ£ãƒ¼ã‚¸åˆ°é”æ™‚ç‚¹ã§ç™ºå‹•ã™ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚

**å¤‰æ›´å†…å®¹:**
- `addMurionCharge` é–¢æ•°ã‚’æ‹¡å¼µã—ã€ãƒãƒ£ãƒ¼ã‚¸100%åˆ°é”æ™‚ã«è‡ªå‹•ã§ `triggerSupportSkill` ã‚’å‘¼ã³å‡ºã™
- `triggerSupportSkill` é–¢æ•°ã‚’è¿½åŠ : ã€Œã‚ãŸã—ãŒåŠ©ã‘ã‚‹ï¼ã€ã®ãƒ­ã‚¸ãƒƒã‚¯ã‚’ç‹¬ç«‹ã—ãŸé–¢æ•°ã«æŠ½å‡º

**ã‚¿ãƒ¼ã‚²ãƒƒãƒˆé¸æŠž:**
- `skillTargetId` ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹å ´åˆã€ãã®å‘³æ–¹ã‚’ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã¨ã™ã‚‹ï¼ˆã‚µãƒ³ãƒ‡ãƒ¼ã¨åŒæ§˜ï¼‰
- è¨­å®šã•ã‚Œã¦ã„ãªã„å ´åˆã€æœ€ã‚‚ATKãŒé«˜ã„å‘³æ–¹ã‚’ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã¨ã™ã‚‹ï¼ˆãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼‰

**ä½¿ç”¨æ–¹æ³•:**
ãƒ‘ãƒ¼ãƒ†ã‚£ç·¨æˆç”»é¢ã§é–‹æ‹“è€…ãƒ»è¨˜æ†¶ã®ã€Œã‚ãŸã—ãŒåŠ©ã‘ã‚‹ï¼å¯¾è±¡ã€ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ã‹ã‚‰ã€ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚’æŒ‡å®šã§ãã¾ã™ã€‚

**UIå¤‰æ›´:**
- è¨˜æ†¶é–‹æ‹“è€…ã®ã‚¹ã‚­ãƒ«ã« `manualTargeting: true` ã‚’è¿½åŠ 
- ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¹ãƒ­ãƒƒãƒˆã‚«ãƒ¼ãƒ‰ã§ãƒ©ãƒ™ãƒ«ã€Œã‚ãŸã—ãŒåŠ©ã‘ã‚‹ï¼å¯¾è±¡:ã€ã‚’è¡¨ç¤º
- ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆé¸æŠžè‚¢ã‚’ã€Œ(ATKæœ€é«˜ã®å‘³æ–¹)ã€ã«å¤‰æ›´

**å½±éŸ¿ã‚’å—ã‘ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«:**
- `app/data/characters/trailblazer-remembrance.ts`
- `app/components/PartySlotCard.tsx`

---

## 2025-12-26: ã‚¢ã‚°ãƒ©ã‚¤ã‚¢ç§˜æŠ€å®Ÿè£…

### ç§˜æŠ€ã€Œæ˜Ÿã‚’çºã„ã—çƒˆå‰£ã€ã®å®Ÿè£…

ã‚¢ã‚°ãƒ©ã‚¤ã‚¢ã®ç§˜æŠ€ãŒæ­£ã—ãå®Ÿè£…ã•ã‚Œã¦ã„ãªã‹ã£ãŸå•é¡Œã‚’ä¿®æ­£ã—ã¾ã—ãŸã€‚

**å®Ÿè£…å†…å®¹:**
ç§˜æŠ€ä½¿ç”¨æ™‚ï¼ˆ`useTechnique: true`ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰ã€æˆ¦é—˜é–‹å§‹æ™‚ã«ä»¥ä¸‹ã®åŠ¹æžœãŒç™ºå‹•ã—ã¾ã™ï¼š

1. **EP30å›žå¾©**: ã‚¢ã‚°ãƒ©ã‚¤ã‚¢ã®EPã‚’30å›žå¾©
2. **ãƒ©ãƒ•ãƒˆãƒ©å¬å–š**: è¨˜æ†¶ã®ç²¾éœŠã€Œãƒ©ãƒ•ãƒˆãƒ©ã€ã‚’å¬å–šï¼ˆç²¾éœŠå¤©è³¦ã€ŒéŽãŽåŽ»ã‚Šã—å¤å½±ã€ã«ã‚ˆã‚Šè¡Œå‹•é †100%çŸ­ç¸®ï¼‰
3. **æ•µå…¨ä½“æ”»æ’ƒ**: æ•µå…¨ä½“ã«ã‚¢ã‚°ãƒ©ã‚¤ã‚¢ã®æ”»æ’ƒåŠ›100%åˆ†ã®é›·å±žæ€§ãƒ€ãƒ¡ãƒ¼ã‚¸ã‚’ä¸Žãˆã‚‹ï¼ˆå‰Šé­å€¤20ï¼‰
4. **éš™ã‚’ç¸«ã†ç³¸ä»˜ä¸Ž**: ãƒ©ãƒ³ãƒ€ãƒ ãªæ•µ1ä½“ã«ã€Œéš™ã‚’ç¸«ã†ç³¸ã€çŠ¶æ…‹ã‚’ä»˜ä¸Ž

**ãƒ†ã‚¹ãƒˆä¿®æ­£:**
- `aglaea.test.ts` ã®ãƒ†ã‚¹ãƒˆè¨­å®šã« `useTechnique: false` ã‚’è¿½åŠ ã—ã€ç§˜æŠ€ãªã—ã§ã®ã‚¹ã‚­ãƒ«ã«ã‚ˆã‚‹å¬å–šã‚’ãƒ†ã‚¹ãƒˆã§ãã‚‹ã‚ˆã†ã«å¤‰æ›´

### å¿…æ®ºæŠ€ã€Œå…±ã«èˆžãˆã€é‹å‘½ã®ãƒ©ãƒ•ãƒˆãƒ©ã€ã®è¿½åŠ å®Ÿè£…

å¿…æ®ºæŠ€ã®æœªå®Ÿè£…éƒ¨åˆ†ã‚’ä¿®æ­£ã—ã¾ã—ãŸã€‚

**è¿½åŠ å®Ÿè£…å†…å®¹:**

1. **å¼·åŒ–é€šå¸¸æ”»æ’ƒã€Œå‰£å…ˆã‚ˆã‚Šåƒã®å£ä»˜ã‘ã‚’ã€**
   - `enhancedBasic` ã‚¢ãƒ“ãƒªãƒ†ã‚£ã‚’è¿½åŠ 
   - å˜ä½“: ã‚¢ã‚°ãƒ©ã‚¤ã‚¢æ”»æ’ƒåŠ›200% + ãƒ©ãƒ•ãƒˆãƒ©æ”»æ’ƒåŠ›200%ï¼ˆå‰Šé­å€¤20ï¼‰
   - éš£æŽ¥: ã‚¢ã‚°ãƒ©ã‚¤ã‚¢æ”»æ’ƒåŠ›90% + ãƒ©ãƒ•ãƒˆãƒ©æ”»æ’ƒåŠ›90%ï¼ˆå‰Šé­å€¤10ï¼‰
   - SPã‚’å›žå¾©ã—ãªã„
   - E3: é€šå¸¸æ”»æ’ƒLv+1 ã§å€çŽ‡ãŒä¸Šæ˜‡ï¼ˆ220%/99%ï¼‰

2. **è‡³é«˜ã®å§¿çŠ¶æ…‹ã®å¼·åŒ–**
   - `ENHANCED_BASIC` ã‚¿ã‚°è¿½åŠ : é€šå¸¸æ”»æ’ƒãŒè‡ªå‹•çš„ã«å¼·åŒ–é€šå¸¸æ”»æ’ƒã«åˆ‡ã‚Šæ›¿ã‚ã‚‹
   - `SKILL_SILENCE` ã‚¿ã‚°è¿½åŠ : ã‚¹ã‚­ãƒ«ç™ºå‹•ä¸å¯

3. **ãƒ©ãƒ•ãƒˆãƒ©ã®è¡Œå‹•åˆ¶é™ç³»ãƒ‡ãƒãƒ•æŠµæŠ—**
   - è‡³é«˜ã®å§¿ä¸­ã€ãƒ©ãƒ•ãƒˆãƒ©ã« `CC_IMMUNE` ã‚¿ã‚°ã‚’æŒã¤ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚’ä»˜ä¸Ž
   - è‡³é«˜ã®å§¿ãŒè§£é™¤ã•ã‚Œã‚‹ã¨è‡ªå‹•çš„ã«è§£é™¤ï¼ˆLINKED durationTypeï¼‰

### ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³å‡¦ç†ã®ãƒã‚°ä¿®æ­£

ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³ã®ã‚¿ãƒ¼ãƒ³ãŒæ¥ãŸæ™‚ã«ã€Œè‡³é«˜ã®å§¿ã€ãŒæ­£ã—ãè§£é™¤ã•ã‚Œãªã„è¤‡æ•°ã®å•é¡Œã‚’ä¿®æ­£ã—ã¾ã—ãŸã€‚

**å•é¡Œ1: ãƒ¦ãƒ‹ãƒƒãƒˆå‰Šé™¤å¾Œã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³å‡¦ç†**
- ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³ã¯ `ON_TURN_START` ã‚¤ãƒ™ãƒ³ãƒˆç™ºç«æ™‚ã«å‰Šé™¤ã•ã‚Œã‚‹ãŒã€ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ³ã‚¸ãƒ³ãŒãã®å¾Œã‚‚ãƒ¦ãƒ‹ãƒƒãƒˆã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³å‡¦ç†ã‚’ç¶šè¡Œã—ã‚ˆã†ã¨ã—ã¦ã„ãŸ

**ä¿®æ­£å†…å®¹:**
- `stepSimulation` é–¢æ•°ã§ `ON_TURN_START` ã‚¤ãƒ™ãƒ³ãƒˆç™ºç«å¾Œã«ãƒ¦ãƒ‹ãƒƒãƒˆã®å­˜åœ¨ç¢ºèªã‚’è¿½åŠ 
- ãƒ¦ãƒ‹ãƒƒãƒˆãŒå‰Šé™¤ã•ã‚Œã¦ã„ãŸå ´åˆã€ã‚¿ãƒ¼ãƒ³çµ‚äº†å‡¦ç†ã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ã¦æ­£å¸¸çµ‚äº†ã™ã‚‹ã‚ˆã†ã«å¤‰æ›´

**å•é¡Œ2: ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³ã®AVãŒNaN/10000ã«ãªã‚‹**
- ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³ãƒ¦ãƒ‹ãƒƒãƒˆã® `baseStats` ãŒç©ºã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ `{}` ã ã£ãŸãŸã‚ã€`calculateFinalStats` ãŒå‘¼ã°ã‚Œã‚‹ã¨ `spd` ãŒ `undefined` ã¨ãªã‚Šã€AVãŒ `NaN` ã¾ãŸã¯ `10000` ã«ãªã£ã¦ã„ãŸ

**ä¿®æ­£å†…å®¹:**
- ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³ãƒ¦ãƒ‹ãƒƒãƒˆã® `baseStats` ã«ã‚‚ `spd: 100` ã‚’å«ã‚€å®Œå…¨ãªã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’è¨­å®š
- `updateActionQueue` ã«NaNæ¤œå‡ºã¨ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å‡¦ç†ã‚’è¿½åŠ 

**å­¦ã‚“ã çŸ¥è¦‹:**
> ã‚·ã‚¹ãƒ†ãƒ ãƒ¦ãƒ‹ãƒƒãƒˆï¼ˆã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³ç­‰ï¼‰ã‚’ä½œæˆã™ã‚‹éš›ã¯ã€`stats`### Aglaea & Others
- **Enhanced Basic Attack Log (Aglaea)**: `calculateDmgBoost` ã‚’ä¿®æ­£ã—ã€`ENHANCED_BASIC_ATTACK` ã« `basic_atk_dmg_boost` ãŒé©ç”¨ã•ã‚Œã‚‹ã‚ˆã†ã«å¤‰æ›´ã€‚`onEnhancedBasicAttack` ã‚’ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã—ã€`calculateDamageWithCritInfo` ã‚’ä½¿ç”¨ã—ã¦æ­£ã—ã„ãƒ€ãƒ¡ãƒ¼ã‚¸ãƒ–ãƒ¼ã‚¹ãƒˆã¨çµ±åˆãƒ­ã‚°ã‚’å®Ÿç¾ã€‚
- **Damage Calculation Fixes (Acheron, Blade, Bronya)**: `calculateNormalAdditionalDamageWithCritInfo`ï¼ˆãƒ–ãƒ¼ã‚¹ãƒˆéžé©ç”¨ï¼‰ã‚’ä½¿ç”¨ã—ã¦ã„ãŸç®‡æ‰€ã‚’ `calculateDamageWithCritInfo` ã«å¤‰æ›´ã—ã€é©åˆ‡ãªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚¿ã‚¤ãƒ—ï¼ˆå¿…æ®ºæŠ€ã€è¿½åŠ æ”»æ’ƒãªã©ï¼‰ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã§ã€å¯¾å¿œã™ã‚‹ãƒ€ãƒ¡ãƒ¼ã‚¸ãƒ–ãƒ¼ã‚¹ãƒˆãŒæ­£ã—ãé©ç”¨ã•ã‚Œã‚‹ã‚ˆã†ã«ä¿®æ­£ã€‚
  - **Acheron**: å¿…æ®ºæŠ€ãƒ€ãƒ¡ãƒ¼ã‚¸è¨ˆç®—ã‚’ä¿®æ­£ã€‚
  - **Blade**: è¿½åŠ æ”»æ’ƒãƒ€ãƒ¡ãƒ¼ã‚¸è¨ˆç®—ã‚’ä¿®æ­£ã€‚
  - **Bronya**: E4è¿½åŠ æ”»æ’ƒãƒ€ãƒ¡ãƒ¼ã‚¸è¨ˆç®—ã‚’ä¿®æ­£ã€‚
- **Affected Files**:
  - `app/data/characters/aglaea.ts`
  - `app/data/characters/acheron.ts`
  - `app/data/characters/blade.ts`
  - `app/data/characters/bronya.ts`
  - `app/simulator/damage.ts`
- `app/simulator/engine/actionValue.ts`
- `app/simulator/scenarios/aglaea.test.ts`
- `app/data/characters/CHARACTER_IMPLEMENTATION_GUIDE.md` (ã‚»ã‚¯ã‚·ãƒ§ãƒ³20è¿½åŠ )

---

## 2025-12-26: ãƒˆãƒªãƒ“ãƒ¼çµç•Œãƒˆãƒªã‚¬ãƒ¼ä¿®æ­£

### çµç•Œä»˜åŠ ãƒ€ãƒ¡ãƒ¼ã‚¸ãƒ»è»Œè·¡3ã‚¨ãƒãƒ«ã‚®ãƒ¼å›žå¾©ã®ãƒˆãƒªã‚¬ãƒ¼å¤‰æ›´

ãƒˆãƒªãƒ“ãƒ¼ã®çµç•Œã«ã‚ˆã‚‹ä»˜åŠ ãƒ€ãƒ¡ãƒ¼ã‚¸ã¨è»Œè·¡3ã®ã‚¨ãƒãƒ«ã‚®ãƒ¼å›žå¾©ãŒã€å›žå¾©ã‚„ãƒãƒ•ã‚¹ã‚­ãƒ«ï¼ˆãƒ€ãƒ¡ãƒ¼ã‚¸ãªã—ï¼‰ã§ã‚‚ç™ºå‹•ã—ã¦ã„ãŸãƒã‚°ã‚’ä¿®æ­£ã—ã¾ã—ãŸã€‚

**ä¿®æ­£å†…å®¹:**
- ãƒˆãƒªã‚¬ãƒ¼ã‚¤ãƒ™ãƒ³ãƒˆã‚’ `ON_ACTION_COMPLETE` ã‹ã‚‰ `ON_ATTACK` ã«å¤‰æ›´
- `ON_ATTACK` ã¯æ”»æ’ƒã‚¢ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆãƒ€ãƒ¡ãƒ¼ã‚¸ã‚’ä¸Žãˆã‚‹è¡Œå‹•ï¼‰ã§ã®ã¿ç™ºç«ã™ã‚‹ãŸã‚ã€å›žå¾©ã‚„ãƒãƒ•ã‚¹ã‚­ãƒ«ã§ã¯ç™ºå‹•ã—ãªããªã‚Šã¾ã™

**ã‚¤ãƒ™ãƒ³ãƒˆã®é•ã„:**
| ã‚¤ãƒ™ãƒ³ãƒˆ | ç™ºç«æ¡ä»¶ | ç”¨é€” |
|---------|---------|------|
| `ON_ACTION_COMPLETE` | ã™ã¹ã¦ã®è¡Œå‹•å®Œäº†å¾Œ | è¡Œå‹•å®Œäº†æ™‚ã®å‡¦ç† |
| `ON_ATTACK` | æ”»æ’ƒã‚¢ã‚¯ã‚·ãƒ§ãƒ³é–‹å§‹æ™‚ | æ”»æ’ƒæ¤œçŸ¥ï¼ˆçµç•Œä»˜åŠ ãƒ€ãƒ¡ãƒ¼ã‚¸ç­‰ï¼‰ |

**å½±éŸ¿ã‚’å—ã‘ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«:**
- `app/data/characters/tribbie.ts`

### å…‰å††éŒã€Œå¤§åœ°ã‚ˆã‚Šå¤©ã‚’ç›®æŒ‡ã—ã¦ã€ã®SPå›žå¾©ã‚«ã‚¦ãƒ³ãƒˆä¿®æ­£

ã‚µãƒ³ãƒ‡ãƒ¼ã®å…‰å††éŒã€Œå¤§åœ°ã‚ˆã‚Šå¤©ã‚’ç›®æŒ‡ã—ã¦ã€ã«ãŠã„ã¦ã€ã‚¹ã‚­ãƒ«/å¿…æ®ºæŠ€ã®ç™ºå‹•å›žæ•°ã‚«ã‚¦ãƒ³ãƒˆãŒæ­£ã—ãç´¯ç©ã•ã‚Œãªã„å¯èƒ½æ€§ãŒã‚ã£ãŸå•é¡Œã‚’ä¿®æ­£ã—ã¾ã—ãŸã€‚

**å•é¡Œç‚¹:**
- ãƒãƒ³ãƒ‰ãƒ©ãƒ¼å‘¼ã³å‡ºã—æ™‚ã«æ¸¡ã•ã‚Œã‚‹ `unit` ã¯å¤ã„ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã§ã‚ã‚‹ãŸã‚ã€åŒã‚¿ãƒ¼ãƒ³å†…ã§ã‚¹ã‚­ãƒ«â†’å¿…æ®ºæŠ€ã¨é€£ç¶šä½¿ç”¨ã—ãŸå ´åˆã€2å›žç›®ã®ã‚¤ãƒ™ãƒ³ãƒˆã§æœ€æ–°ã®ã‚«ã‚¦ãƒ³ãƒˆçŠ¶æ…‹ãŒå‚ç…§ã•ã‚Œãªã„å¯èƒ½æ€§ãŒã‚ã£ãŸ

**ä¿®æ­£å†…å®¹:**
- `unit.effects` ã‹ã‚‰ç›´æŽ¥ãƒˆãƒ©ãƒƒã‚«ãƒ¼ã‚’èª­ã¿å–ã‚‹ä»£ã‚ã‚Šã«ã€`newState.registry.get(createUnitId(unit.id))` ã§æœ€æ–°ã®ãƒ¦ãƒ‹ãƒƒãƒˆçŠ¶æ…‹ã‚’å–å¾—ã—ã¦ã‹ã‚‰ãƒˆãƒ©ãƒƒã‚«ãƒ¼ã‚’å‚ç…§ã™ã‚‹ã‚ˆã†ã«å¤‰æ›´

**å½±éŸ¿ã‚’å—ã‘ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«:**
- `app/data/light-cones/a-grounded-ascent.ts`

---

## 2025-12-25: ã‚­ãƒ£ã‚¹ãƒˆãƒªã‚¹å¿…æ®ºæŠ€ä¿®æ­£ & å®‰å®šæ€§å‘ä¸Š

### ã‚­ãƒ£ã‚¹ãƒˆãƒªã‚¹å¿…æ®ºæŠ€ç™ºå‹•æ¡ä»¶ã®ä¿®æ­£
ã‚­ãƒ£ã‚¹ãƒˆãƒªã‚¹ï¼ˆ`max_ep: 0`ï¼‰ãŒè¡Œå‹•å€¤0ã§å¿…æ®ºæŠ€ã‚’é€£ç™ºã™ã‚‹å•é¡Œã‚’ä¿®æ­£ã—ã¾ã—ãŸã€‚

**ä¿®æ­£å†…å®¹:**
- ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ³ã‚¸ãƒ³ã® `checkAndExecuteInterruptingUltimates` é–¢æ•°ã«ãŠã„ã¦ã€`max_ep: 0` ã®ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã«å¯¾ã—ã¦å¾“æ¥ã®EPåˆ¤å®šã‚’ã‚¹ã‚­ãƒƒãƒ—ã™ã‚‹ã‚ˆã†ã«å¤‰æ›´ã€‚
- ã‚­ãƒ£ã‚¹ãƒˆãƒªã‚¹å°‚ç”¨ã®ã€Œæ–°è•¾ã‚·ã‚¹ãƒ†ãƒ ã€åˆ¤å®šï¼ˆ`charge >= 34000`ï¼‰ã‚’è¿½åŠ ã—ã€æ–°è•¾ãŒä¸Šé™ã«é”ã—ãŸå ´åˆã®ã¿å¿…æ®ºæŠ€ãŒç™ºå‹•ã™ã‚‹ã‚ˆã†ã«ä¿®æ­£ã€‚

### ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ³ã‚¸ãƒ³ã®å®‰å®šæ€§å‘ä¸Š
ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œä¸­ã«ãƒ¦ãƒ‹ãƒƒãƒˆãŒæ¶ˆå¤±ï¼ˆæ­»äº¡ãƒ»é€€å ´ï¼‰ã—ãŸå ´åˆã«ç™ºç”Ÿã™ã‚‹ `TypeError: unit is undefined` ã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã‚’ä¿®æ­£ã—ã¾ã—ãŸã€‚

**ä¿®æ­£å†…å®¹:**
- `stepSimulation` é–¢æ•°å†…ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒ«ãƒ¼ãƒ—ã«ãŠã„ã¦ã€ãƒ¦ãƒ‹ãƒƒãƒˆå†å–å¾—æ™‚ã« `undefined` ãƒã‚§ãƒƒã‚¯ã‚’è¿½åŠ ã€‚
- ãƒ¦ãƒ‹ãƒƒãƒˆãŒå­˜åœ¨ã—ãªã„å ´åˆã¯å®‰å…¨ã«ãƒ«ãƒ¼ãƒ—ã‚’ä¸­æ–­ã™ã‚‹ã‚ˆã†ã«å¤‰æ›´ã€‚

### ã‚­ãƒ£ã‚¹ãƒˆãƒªã‚¹è¨­å®šé …ç›®ã®è¿½åŠ 
æ­»ç«œï¼ˆãƒœãƒªãƒ¥ã‚¯ã‚¹ï¼‰ã®ã€Œæ™¦å†¥ç„¼ãæ‰•ã†æ¯å¹ã€ç™ºå‹•å›žæ•°ã‚’æŒ‡å®šã™ã‚‹ãŸã‚ã®è¨­å®šé …ç›®ã‚’è¿½åŠ ã—ã¾ã—ãŸã€‚

**åˆ©ç”¨æ–¹æ³•:**
ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼è¨­å®šï¼ˆ`CharacterConfig`ï¼‰ã® `customConfig` ã« `siryuBreathCount` ã‚’æŒ‡å®šã—ã¾ã™ã€‚
```typescript
customConfig: {
    siryuBreathCount: 1 // ç™ºå‹•å›žæ•° (ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 1)
}
```

ã¾ãŸã€ãƒ‘ãƒ¼ãƒ†ã‚£ç·¨æˆç”»é¢ã®ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼è©³ç´°è¨­å®šã‹ã‚‰ã‚‚å¤‰æ›´å¯èƒ½ã§ã™ã€‚

---

## 2024-12-18: ãƒ€ãƒ¡ãƒ¼ã‚¸è©³ç´°ã‚’ã‚¢ã‚¯ã‚·ãƒ§ãƒ³è©³ç´°ã«ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°

è¡Œå‹•ãƒ­ã‚°ã®ã€Œãƒ€ãƒ¡ãƒ¼ã‚¸è©³ç´°ã€è¡¨ç¤ºã‚’ã€Œã‚¢ã‚¯ã‚·ãƒ§ãƒ³è©³ç´°ã€ã«ãƒªãƒãƒ¼ãƒ ã—ã€ä¸Žãƒ€ãƒ¡ãƒ¼ã‚¸ãƒ»è¢«ãƒ€ãƒ¡ãƒ¼ã‚¸ãƒ»å›žå¾©ãƒ»ã‚·ãƒ¼ãƒ«ãƒ‰ã‚’çµ±åˆè¡¨ç¤ºã™ã‚‹ã‚ˆã†ã«å¤‰æ›´ã—ã¾ã—ãŸã€‚

### å¤‰æ›´ç‚¹
1. **`UnifiedDamageDetails` â†’ `UnifiedActionDetails`**: ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåã‚’å¤‰æ›´
2. **çµ±åˆè¡¨ç¤º**: ä¸Žãƒ€ãƒ¡ãƒ¼ã‚¸ã€è¢«ãƒ€ãƒ¡ãƒ¼ã‚¸ã€å›žå¾©ã€ã‚·ãƒ¼ãƒ«ãƒ‰ã®4ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’1ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«çµ±åˆ
3. **æ˜Žç¢ºãªåˆ†é¡ž**: å„ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«è‰²åˆ†ã‘ã•ã‚ŒãŸãƒ©ãƒ™ãƒ«ã¨åˆè¨ˆå€¤ã‚’è¡¨ç¤º
   - ðŸ”´ ä¸Žãƒ€ãƒ¡ãƒ¼ã‚¸: ãƒ¡ã‚¤ãƒ³ãƒ’ãƒƒãƒˆ + ä»˜åŠ ãƒ€ãƒ¡ãƒ¼ã‚¸
   - ðŸŸ  è¢«ãƒ€ãƒ¡ãƒ¼ã‚¸: æ•µæ”»æ’ƒ / è‡ªå‚· / DoT
   - ðŸŸ¢ å›žå¾©: HPå›žå¾©è©³ç´°
   - ðŸŸ£ ã‚·ãƒ¼ãƒ«ãƒ‰: ã‚·ãƒ¼ãƒ«ãƒ‰ä»˜ä¸Žè©³ç´°

### å½±éŸ¿ã‚’å—ã‘ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«
- `app/components/SimulationLogTable.tsx`
- `app/simulator/engine/simulation.ts`

### DoTãƒ€ãƒ¡ãƒ¼ã‚¸ã®ãƒ­ã‚°åˆ†é¡žä¿®æ­£

æ•µã®ã‚¿ãƒ¼ãƒ³é–‹å§‹æ™‚ã«ç™ºå‹•ã™ã‚‹DoTãƒ€ãƒ¡ãƒ¼ã‚¸ï¼ˆæ„Ÿé›»ã€ç‡ƒç„¼ãªã©ï¼‰ãŒã€Œä¸Žãƒ€ãƒ¡ãƒ¼ã‚¸ã€æ¬„ã«è¡¨ç¤ºã•ã‚Œã¦ã„ãŸå•é¡Œã‚’ä¿®æ­£ã€‚

**ä¿®æ­£å†…å®¹:**
- æ•µã®ã‚¿ãƒ¼ãƒ³ã§DoTãŒç™ºå‹•ã—ãŸå ´åˆã€`appendDamageTaken` ã‚’ä½¿ç”¨ã—ã¦ã€Œè¢«ãƒ€ãƒ¡ãƒ¼ã‚¸ã€ã¨ã—ã¦è¨˜éŒ²
- æ•µè¦–ç‚¹ã§ã¯ã€DoTã¯æ•µãŒã€Œå—ã‘ãŸã€ãƒ€ãƒ¡ãƒ¼ã‚¸ãªã®ã§è¢«ãƒ€ãƒ¡ãƒ¼ã‚¸æ¬„ã«è¡¨ç¤ºã•ã‚Œã‚‹ã®ãŒæ­£ã—ã„

### å›žå¾©ãƒ»ã‚·ãƒ¼ãƒ«ãƒ‰ã®è¨ˆç®—å¼è¡¨ç¤º

å›žå¾©ã¨ã‚·ãƒ¼ãƒ«ãƒ‰ã«ã‚‚è¨ˆç®—å¼ã®å†…è¨³ã‚’ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—ã§è¡¨ç¤ºã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚

**å¤‰æ›´å†…å®¹:**
1. `HealingEntry` ã¨ `ShieldEntry` ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã« `breakdownMultipliers` ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’è¿½åŠ 
2. `calculateHealWithBreakdown` é–¢æ•°ã‚’è¿½åŠ ï¼ˆå†…è¨³æƒ…å ±ä»˜ãå›žå¾©è¨ˆç®—ï¼‰
3. `applyHealing` ã¨ `applyShield` é–¢æ•°ã«å†…è¨³æƒ…å ±ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è¿½åŠ 
4. `SimulationLogTable.tsx` ã«å›žå¾©ãƒ»ã‚·ãƒ¼ãƒ«ãƒ‰ã®ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—ã‚’è¿½åŠ 

**è¡¨ç¤ºå†…å®¹:**
- å›žå¾©: åŸºç¤Žå›žå¾©é‡ã€ä¸Žå›žå¾©ãƒãƒ•ã€å—å›žå¾©ãƒãƒ•ã€å›žå¾©ä¿‚æ•°ã€å‚ç…§ã‚¹ã‚¿ãƒ¼ã‚¿ã‚¹ã€å€çŽ‡ã€å›ºå®šå€¤
- ã‚·ãƒ¼ãƒ«ãƒ‰: åŸºç¤Žã‚·ãƒ¼ãƒ«ãƒ‰å€¤ã€å‚ç…§ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã€å€çŽ‡ã€å›ºå®šå€¤ã€ä¸Šé™å€¤

### ã‚·ãƒ¼ãƒ«ãƒ‰è¨ˆç®—ã®ä¸€å…ƒåŒ–

**`applyShield`é–¢æ•°ã®ã‚·ã‚°ãƒãƒãƒ£å¤‰æ›´:**
- ç¬¬4å¼•æ•°ã‚’ `shieldValue: number` ã‹ã‚‰ `shieldLogic: ShieldLogic` ã«å¤‰æ›´
- ã‚·ãƒ¼ãƒ«ãƒ‰è¨ˆç®—ã¨è¨ˆç®—å¼å†…è¨³ã®ç”Ÿæˆã‚’`applyShield`å†…éƒ¨ã§è‡ªå‹•å®Ÿè¡Œ
- ã™ã¹ã¦ã®ã‚·ãƒ¼ãƒ«ãƒ‰ã§è‡ªå‹•çš„ã«è¨ˆç®—å¼ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—ãŒè¡¨ç¤ºã•ã‚Œã‚‹

**æ–°ã—ã„ä½¿ç”¨æ–¹æ³•:**
```typescript
applyShield(state, sourceId, targetId, { scaling: 'def', multiplier: 0.24, flat: 320 }, 3, 'TURN_END_BASED', 'ãƒãƒªã‚¢');
```

**å½±éŸ¿ã‚’å—ã‘ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«:**
- `app/simulator/engine/utils.ts` - applyShieldé–¢æ•°ã®ã‚·ã‚°ãƒãƒãƒ£å¤‰æ›´
- `app/simulator/engine/dispatcher.ts` - stepApplyShieldæ›´æ–°
- `app/data/characters/dan-heng-permansor-terrae.ts` - å…¨ã‚·ãƒ¼ãƒ«ãƒ‰å‡¦ç†æ›´æ–°
- `app/data/characters/luocha.ts` - E2ã‚·ãƒ¼ãƒ«ãƒ‰æ›´æ–°
- `app/data/characters/march-7th.ts` - E2ã‚·ãƒ¼ãƒ«ãƒ‰æ›´æ–°

### å›žå¾©è¨ˆç®—ã®ä¸€å…ƒåŒ–

**`applyHealing`é–¢æ•°ã®ã‚·ã‚°ãƒãƒãƒ£å¤‰æ›´:**
- ç¬¬4å¼•æ•°ã‚’ `HealLogic | number` ã«å¤‰æ›´ï¼ˆå¾Œæ–¹äº’æ›æ€§ç¶­æŒï¼‰
- `HealLogic`ã‚’æ¸¡ã—ãŸå ´åˆ: å›žå¾©è¨ˆç®—ã¨è¨ˆç®—å¼å†…è¨³ã‚’`applyHealing`å†…éƒ¨ã§è‡ªå‹•ç”Ÿæˆ
- `number`ã‚’æ¸¡ã—ãŸå ´åˆ: å¾“æ¥é€šã‚Šè¨ˆç®—æ¸ˆã¿å›žå¾©é‡ã‚’ä½¿ç”¨ï¼ˆå†…è¨³ã¯è¡¨ç¤ºã•ã‚Œãªã„ï¼‰

**æ–°ã—ã„ä½¿ç”¨æ–¹æ³•:**
```typescript
// æŽ¨å¥¨: HealLogicã‚’æ¸¡ã™ï¼ˆè¨ˆç®—å¼ãŒè‡ªå‹•è¡¨ç¤ºã•ã‚Œã‚‹ï¼‰
applyHealing(state, sourceId, targetId, { scaling: 'atk', multiplier: 0.10, flat: 200 }, 'å›žå¾©', true);

// å¾Œæ–¹äº’æ›: è¨ˆç®—æ¸ˆã¿å›žå¾©é‡ã‚’æ¸¡ã™ï¼ˆè¤‡é›‘ãªå›žå¾©ãƒ­ã‚¸ãƒƒã‚¯ç”¨ï¼‰
applyHealing(state, sourceId, targetId, calculatedAmount, 'å›žå¾©', true);
```

**å¯¾å¿œæ¸ˆã¿ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼:**
- `luocha.ts` - ã‚¹ã‚­ãƒ«ãƒ»çµç•Œå›žå¾©ã‚’`HealLogic`å½¢å¼ã«æ›´æ–°
- `blade.ts` - è‡ªå·±å›žå¾©ã‚’`HealLogic`å½¢å¼ã«æ›´æ–°

**å¾Œæ–¹äº’æ›æ€§ã‚’ç¶­æŒ:**
- `hianshi.ts` - è¤‡é›‘ãªæ¡ä»¶ä»˜ãå›žå¾©ãƒ­ã‚¸ãƒƒã‚¯ã®ãŸã‚ã€è¨ˆç®—æ¸ˆã¿å›žå¾©é‡ã‚’æ¸¡ã™å½¢å¼ã‚’ç¶­æŒ


## 2024-12-16: CCåŠ¹æžœã‚¿ãƒ¼ãƒ³ã‚¹ã‚­ãƒƒãƒ—ä¿®æ­£

è¡Œå‹•åˆ¶é™ãƒ‡ãƒãƒ•ï¼ˆå‡çµãƒ»ã‚‚ã¤ã‚Œãƒ»ç¦éŒ®ï¼‰ã®ã‚¿ãƒ¼ãƒ³ã‚¹ã‚­ãƒƒãƒ—å‡¦ç†é †åºã‚’ä¿®æ­£ã—ã¾ã—ãŸã€‚

### å‡¦ç†é †åº
1. ä»˜åŠ ãƒ€ãƒ¡ãƒ¼ã‚¸å‡¦ç†ï¼ˆå‡çµãƒ»ã‚‚ã¤ã‚Œï¼‰
2. åŠ¹æžœæ™‚é–“æ¸›å°‘ (`duration - 1`)
3. `duration > 0` â†’ ã‚¿ãƒ¼ãƒ³ã‚¹ã‚­ãƒƒãƒ— / `duration <= 0` â†’ åŠ¹æžœè§£é™¤ã—ã¦é€šå¸¸è¡Œå‹•

### çµæžœ
- `duration: 1` ã§ä»˜ä¸Žã•ã‚ŒãŸåŠ¹æžœã¯ã€ã‚¿ãƒ¼ãƒ³é–‹å§‹æ™‚ã«è§£é™¤ã•ã‚Œã¦**é€šå¸¸è¡Œå‹•å¯èƒ½**
- `duration: 2` ä»¥ä¸Šã§ä»˜ä¸Žã•ã‚ŒãŸåŠ¹æžœã¯ã€ã‚¿ãƒ¼ãƒ³ã‚¹ã‚­ãƒƒãƒ—ãŒç™ºç”Ÿ

---

## 2024-12-16: å…‰å††éŒã‚¯ãƒ¼ãƒ«ãƒ€ã‚¦ãƒ³ä¿®æ­£

`lightConeHandlers.ts` ã§å…‰å††éŒã®ã‚¯ãƒ¼ãƒ«ãƒ€ã‚¦ãƒ³å‡¦ç†ã‚’ä¿®æ­£ã—ã¾ã—ãŸã€‚

### å¤‰æ›´ç‚¹
- `cooldownTurns` ã¨ `maxActivations` ã‚’æ­£ã—ãå‚ç…§ã™ã‚‹ã‚ˆã†ã«ä¿®æ­£
- `lightConeState` ã‚’ãƒ¦ãƒ‹ãƒƒãƒˆã«ä¿å­˜ã—ã¦ç™ºå‹•å›žæ•°ã‚’è¿½è·¡
- `ON_TURN_START` ã§ãƒªã‚»ãƒƒãƒˆå‡¦ç†ã‚’å®Ÿè£…

---

## 2024-12-16: ã‚¤ãƒ™ãƒ³ãƒˆã‚¿ã‚¤ãƒ—å¯¾å¿œè¡¨

`EVENT_REFERENCE.md` ã«ã€Œã‚²ãƒ¼ãƒ å†…èª¬æ˜Žæ–‡ã¨ã‚¤ãƒ™ãƒ³ãƒˆã‚¿ã‚¤ãƒ—ã®å¯¾å¿œã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ ã—ã¾ã—ãŸã€‚

ä¸»ãªå¯¾å¿œï¼š
- ã€Œæ”»æ’ƒã‚’è¡Œã£ãŸå¾Œã€â†’ `ON_ATTACK`
- ã€Œæ”»æ’ƒã™ã‚‹æ™‚ã€â†’ `ON_BEFORE_ATTACK`
- ã€Œå‘½ä¸­ã™ã‚‹æ™‚ã€â†’ `ON_BEFORE_HIT`
- ã€Œå‘½ä¸­ã‚’å—ã‘ãŸæ™‚ã€â†’ `ON_BEFORE_HIT` (targetId ã§åˆ¤å®š)

---

## 2024-12-16: æ–°è¦ã‚¤ãƒ™ãƒ³ãƒˆã‚¿ã‚¤ãƒ—è¿½åŠ 

4ã¤ã®æ–°è¦ã‚¤ãƒ™ãƒ³ãƒˆã‚¿ã‚¤ãƒ—ãŒè¿½åŠ ã•ã‚Œã¾ã—ãŸã€‚
è©³ç´°ã¯ [ã‚¤ãƒ™ãƒ³ãƒˆã‚·ã‚¹ãƒ†ãƒ ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹](EVENT_REFERENCE.md) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

- `ON_BEFORE_ACTION`
- `ON_BEFORE_ATTACK`
- `ON_BEFORE_HIT`
- `ON_AFTER_HIT`

---

## 2024-12-16: Action Value (AV) ç®¡ç†ã®å®Œå…¨ä¸€å…ƒåŒ–

`actionPoint` ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒå»ƒæ­¢ã•ã‚Œã€AVç®¡ç†ãŒå®Œå…¨ã«ä¸€å…ƒåŒ–ã•ã‚Œã¾ã—ãŸã€‚
è©³ç´°ã¯ [AVç®¡ç†ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹](AV_MANAGEMENT.md) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

### å¤‰æ›´ç‚¹
1. **`actionPoint` ã®å»ƒæ­¢**: `Unit` ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‹ã‚‰å‰Šé™¤ã€‚
2. **`setUnitActionValue` ã®å°Žå…¥**: AVã®ç›´æŽ¥è¨­å®šç”¨é–¢æ•°ã€‚
3. **`advanceAction`/`delayAction` ã®å†…éƒ¨å¤‰æ›´**: æ–°ã—ã„AVé–¢æ•°ã‚’ä½¿ç”¨ã™ã‚‹ã‚ˆã†ã«æ›´æ–°ã€‚
4. **`recalculateActionValueFromActionPoint` ã®å‰Šé™¤**ã€‚

---

## 2024-12-15: EPå›žå¾©ã‚¤ãƒ™ãƒ³ãƒˆå®Ÿè£…

EPå›žå¾©æ™‚ã« `ON_EP_GAINED` ã‚¤ãƒ™ãƒ³ãƒˆãŒç™ºç«ã™ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚
è¨˜æ†¶ã®é–‹æ‹“è€…ã®ãƒãƒ£ãƒ¼ã‚¸ç²å¾—ãªã©ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚

```typescript
// æŽ¨å¥¨ã•ã‚Œã‚‹ä½¿ç”¨æ³•
import { publishEvent } from '../../simulator/engine/dispatcher';
addEnergyToUnit(state, unitId, 5, 0, false, {
    sourceId: sourceId,
    publishEventFn: publishEvent
});
```

---

## 2024-12-12: ãƒ¬ã‚¸ã‚¹ãƒˆãƒªã‚·ã‚¹ãƒ†ãƒ ã®å°Žå…¥

`state.units` ã®ç›´æŽ¥é…åˆ—æ“ä½œãŒéžæŽ¨å¥¨ã¨ãªã‚Šã€`state.registry` ã‚’ä½¿ç”¨ã—ãŸãƒžãƒƒãƒ—ãƒ™ãƒ¼ã‚¹ã®æ“ä½œã«ç§»è¡Œã—ã¾ã—ãŸã€‚

### ç§»è¡Œã‚¬ã‚¤ãƒ‰

**éžæŽ¨å¥¨ (Deprecated):**
```typescript
const unit = state.units.find(u => u.id === id);
state.units = state.units.map(u => ...);
```

**æŽ¨å¥¨ (Recommended):**
```typescript
const unit = state.registry.get(createUnitId(id));
const newRegistry = state.registry.update(createUnitId(id), u => ...);
```
